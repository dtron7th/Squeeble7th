<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eden Economy</title>

    <link rel="stylesheet" href="CSS/UI.css">

</head>
<body>
    <style aria-label="Body_Style">
        body {
            background-color: rgb(0, 0, 0);
            width: 100dvw;
            height: 100dvh;
            display: flex;
            justify-content: center;
        }
    </style>

    <!-- ============================================================================ //
    // UNIVERSAL UI //
    // ============================================================================ -->

    <!--DOT GRID-->

    <div class="Dot_Grid">
        <style aria-label="Dot_Grid_Style">
        /* 10px x 10px dot grid background */
        .Dot_Grid {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;

            --dot-color: var(--Dot_Grid);
            --dot-size: 1px;
            --grid-spacing: 20px;

            background-image: radial-gradient(circle, var(--dot-color) var(--dot-size), transparent calc(var(--dot-size) + 0.5px));
            background-size: var(--grid-spacing) var(--grid-spacing);
        }
        </style>
    </div>

    <!--PROGRESS BAR-->

    <div class="Progress_Bar" style="display: none;">
        <div class="Progress_Bar_Fill">

        </div>

        <style aria-label="Progress_Bar_Style">
            .Progress_Bar {
                position: absolute;
                bottom: 10px;
                width: calc(100% - 20px);
                height: 20px;
                border: 1px solid var(--Main_Border);
            }

            .Progress_Bar > .Progress_Bar_Fill {
                width: 100%;
                height: 100%;
                background-color: var(--Progress_Bar_Background);
                
            }
        </style>
    </div>
    <div class="Start" style="display: flex;">

        <!-- ============================================================================ //
        // WALLPAPER //
        // ============================================================================ -->

        <div class="Wallpaper">
            <div class="Wallpaper_List">
                <img class="Wallpaper_Image" src="Images/Wallpaper/Wallpaper_1.jpg" alt="Wallpaper 1">
            </div>
            <div class="Glass">

            </div>

            <style aria-label="Wallpaper_Style">
                .Wallpaper {
                    width: 100dvw;
                    height: 100dvh;
                    z-index: -1;
                }

                .Wallpaper_List {
                    width: 100dvw;
                    height: 100dvh;
                    
                }

                .Wallpaper_Image {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                }

                .Glass {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100dvw;
                    height: 100dvh;
                    backdrop-filter: blur(10px);
                }
            </style>
            
            <script aria-label="Wallpaper_Slideshow">
                (() => {
                    const FADE_IN_MS = 800;
                    const BLEND_MODE = 'screen'; // try 'overlay', 'lighten', 'multiply', etc.

                    // inject fade-in keyframes/style
                    (function() {
                        const s = document.createElement('style');
                        s.textContent = `
                        @keyframes wallpaperFadeIn {
                            from { opacity: 0; }
                            to   { opacity: 1; }
                        }
                        .wallpaper-fade {
                            animation: wallpaperFadeIn ${FADE_IN_MS}ms ease both;
                        }`;
                        document.head.appendChild(s);
                    })();

                    // observe inline style opacity changes and apply fade class when an image becomes visible
                    (function() {
                        const observer = new MutationObserver(mutations => {
                            for (const m of mutations) {
                                const t = m.target;
                                if (!(t instanceof HTMLElement)) continue;
                                if (!t.classList.contains('Wallpaper_Image')) continue;
                                if (t.style && (t.style.opacity === '1' || t.style.opacity === '1.0')) {
                                    t.classList.add('wallpaper-fade');
                                    clearTimeout(t.___fadeRemoveTimer);
                                    t.___fadeRemoveTimer = setTimeout(() => {
                                        t.classList.remove('wallpaper-fade');
                                        delete t.___fadeRemoveTimer;
                                    }, FADE_IN_MS + 50);
                                }
                            }
                        });

                        observer.observe(document.body, { attributes: true, subtree: true, attributeFilter: ['style'] });
                        window.addEventListener('beforeunload', () => observer.disconnect());
                    })();

                    const container = document.querySelector('.Wallpaper_List');
                    if (!container) return;

                    const imgs = Array.from(container.querySelectorAll('img.Wallpaper_Image'));
                    if (!imgs.length) return;

                    // config (ms)
                    const displayDuration = 5000;      // time each image is fully visible
                    const transitionDuration = 1000;   // crossfade duration

                    // set container and image base styles
                    Object.assign(container.style, {
                        position: 'relative',
                        zIndex: '-1',
                        overflow: 'hidden',
                        isolation: 'isolate' // ensure blend modes compose within the container
                    });

                    imgs.forEach((img, i) => {
                        Object.assign(img.style, {
                            position: 'absolute',
                            inset: '0',
                            width: '100%',
                            height: '100%',
                            objectFit: 'cover',
                            transition: `opacity ${transitionDuration}ms ease`,
                            opacity: '0',
                            pointerEvents: 'none',
                            willChange: 'opacity, transform',
                            mixBlendMode: BLEND_MODE,
                            transform: 'translateZ(0)' // promote to its own layer for smoother compositing
                        });
                        img.dataset.wallIndex = i;
                    });

                    // Fisher-Yates shuffle
                    function shuffle(array) {
                        for (let i = array.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [array[i], array[j]] = [array[j], array[i]];
                        }
                        return array;
                    }

                    // build playback order (array of image elements)
                    let order = shuffle(imgs.slice());
                    let current = 0;
                    let timer = null;

                    // show a specific image element (crossfade from current to next)
                    function showIndex(nextIndex) {
                        const nextImg = order[nextIndex];
                        const curImg = order[current];

                        if (nextImg === curImg) {
                            nextImg.style.opacity = '1';
                            return;
                        }

                        // ensure next is on top visually by DOM order; move it to end if necessary
                        if (nextImg && nextImg.parentElement) nextImg.parentElement.appendChild(nextImg);

                        // bring next to visible (both visible for blend)
                        nextImg.style.opacity = '1';

                        // fade out previous after a tiny overlap to let blending occur
                        if (curImg) {
                            setTimeout(() => {
                                curImg.style.opacity = '0';
                            }, 10);
                        }

                        current = nextIndex;
                    }

                    // advance to next, reshuffle after a full loop
                    function advance() {
                        const next = (current + 1) % order.length;
                        showIndex(next);

                        // if we've completed a loop, reshuffle order but keep the currently visible image first
                        if (next === 0) {
                            const visible = order[current];
                            const remaining = imgs.filter(i => i !== visible);
                            shuffle(remaining);
                            order = [visible, ...remaining];
                            current = 0;
                        }
                    }

                    // preload images and start slideshow
                    Promise.all(order.map(img => {
                        if (img.complete) return Promise.resolve();
                        return new Promise(res => { img.onload = img.onerror = res; });
                    })).then(() => {
                        // ensure all start hidden, then reveal first without flash
                        order.forEach(img => img.style.opacity = '0');
                        order[0].style.opacity = '1';
                        current = 0;

                        // start interval
                        timer = setInterval(advance, displayDuration);
                    });

                    // cleanup
                    window.addEventListener('beforeunload', () => {
                        if (timer) clearInterval(timer);
                    });
                })();
            </script>
        </div>

        <!-- ============================================================================ //
        // TOP UI //
        // ============================================================================ -->

        <div class="Top_UI">
            <div class="Details">
                <div class="Clock">
                    <p class="Clock_HMSM">12:00:00 PM</p>
                    <p class="Clock_DMY">DD/MM/YYYY</p>
                </div>
                <div class="Device_Location">
                    <p class="Device_Location_Point">Location</p>
                </div>
                <div class="Network_Name">
                    <p class="Current_Network_Name">Network Name</p>
                </div>
            </div>
            <div class="User_Information">
                <button id="About">[About]</button>
                <button id="About">[Road Map]</button>
                <button id="About">[Character Sheet]</button>
                <button id="About">[Version]</button>
                <button id="About">[Share]</button>
            </div>

            <style aria-label="Top_UI_Style">
                .Top_UI {
                    position: absolute;
                    top: 10px;
                    width: 100%;
                }

                .Top_UI > .Details {
                    position: absolute;
                    right: 10px;

                }

                .Top_UI > .Details > .Clock > .Clock_HMSM {
                    color: var(--Main_Text_Color_1);

                }

                .Top_UI > .Details > .Clock > .Clock_DMY {
                    color: var(--Main_Text_Color_1);
                }

                .Top_UI > .Details > .Device_Location {
                    position: absolute;
                    top: 60px;
                    color: var(--Main_Text_Color_1);

                }

                .Top_UI > .Details > .Network_Name {
                    position: absolute;
                    top: 110px;
                    color: var(--Main_Text_Color_1);
                }

                .Top_UI > .User_Information {
                    position: absolute;
                    left: 10px;
                    color: var(--Main_Text_Color_1);
                    display: flex;
                    flex-direction: column;
                    align-items: flex-start;
                    gap: 10px;
                }
                
            </style>

            <script aria-label="Top_UI_Script">

                /* ============================================================================ */
                /* SET CLOCK */
                /* ============================================================================ */
                (() => {
                    const el = document.querySelector('.Clock_HMSM');
                    if (!el) return;

                    el.style.fontSize = '14px';

                    const pad = (n, d = 2) => String(n).padStart(d, '0');

                    function update() {
                        const now = new Date();
                        let h = now.getHours();
                        const ampm = h >= 12 ? 'PM' : 'AM';
                        h = h % 12 || 12;
                        const m = pad(now.getMinutes());
                        const s = pad(now.getSeconds());
                        const ms = String(now.getMilliseconds()).padStart(3, '0');
                        el.textContent = `${pad(h)}:${m}:${s}.${ms} ${ampm}`;
                        requestAnimationFrame(update);
                    }

                    requestAnimationFrame(update);
                })();

                /* ============================================================================ */
                /* SET DATE */
                /* ============================================================================ */

                (() => {
                    const el = document.querySelector('.Clock_DMY');
                    if (!el) return;

                    el.style.fontSize = '10px';

                    const pad = (n, d = 2) => String(n).padStart(d, '0');

                    function update() {
                        const now = new Date();
                        const d = pad(now.getDate());
                        const m = pad(now.getMonth() + 1);
                        const y = now.getFullYear();
                        el.textContent = `${d}/${m}/${y}`;
                    }

                    update();
                })();

                /* ============================================================================ */
                /* GET DEVICE LOCATION */
                /* ============================================================================ */

                (async () => {
                    const el = document.querySelector('.Device_Location_Point');
                    if (!el || !navigator.geolocation) return;
                    el.style.fontSize = '10px';
                    el.textContent = '[Locating...]';

                    const US_STATES = {
                        "alabama":"AL","alaska":"AK","arizona":"AZ","arkansas":"AR","california":"CA","colorado":"CO",
                        "connecticut":"CT","delaware":"DE","florida":"FL","georgia":"GA","hawaii":"HI","idaho":"ID",
                        "illinois":"IL","indiana":"IN","iowa":"IA","kansas":"KS","kentucky":"KY","louisiana":"LA",
                        "maine":"ME","maryland":"MD","massachusetts":"MA","michigan":"MI","minnesota":"MN","mississippi":"MS",
                        "missouri":"MO","montana":"MT","nebraska":"NE","nevada":"NV","new hampshire":"NH","new jersey":"NJ",
                        "new mexico":"NM","new york":"NY","north carolina":"NC","north dakota":"ND","ohio":"OH","oklahoma":"OK",
                        "oregon":"OR","pennsylvania":"PA","rhode island":"RI","south carolina":"SC","south dakota":"SD",
                        "tennessee":"TN","texas":"TX","utah":"UT","vermont":"VT","virginia":"VA","washington":"WA",
                        "west virginia":"WV","wisconsin":"WI","wyoming":"WY","district of columbia":"DC"
                    };

                    function formatLocation(city, region, country) {
                        // final format: (City Name, AA, Country)
                        if (!city) city = '';
                        if (!region) region = '';
                        if (!country) country = '';
                        return `(${city.trim() || 'Unknown'}, ${region.trim() || '??'}, ${country.trim() || 'Unknown'})`;
                    }

                    navigator.geolocation.getCurrentPosition(async pos => {
                        try {
                            const lat = pos.coords.latitude;
                            const lon = pos.coords.longitude;
                            const url = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}&addressdetails=1`;
                            const resp = await fetch(url, { headers: { 'Accept-Language': 'en' } });
                            if (!resp.ok) throw new Error('geocode failed');
                            const data = await resp.json();
                            const a = data.address || {};

                            const city = a.city || a.town || a.village || a.municipality || a.hamlet || a.county || '';
                            const country = a.country || '';
                            const cc = (a.country_code || '').toUpperCase();

                            let region = '';
                            if (a.state_code) region = a.state_code.toUpperCase();
                            else if (a.state) {
                                const s = a.state.toLowerCase();
                                if (cc === 'US' && US_STATES[s]) region = US_STATES[s];
                                else region = a.state; // fallback to full state name
                            } else if (a.region) region = a.region;
                            else if (a.county) region = a.county;

                            el.style.fontSize = '10px';
                            el.textContent = formatLocation(city, region, country);
                        } catch (e) {
                            el.style.fontSize = '10px';
                            el.textContent = 'Location unavailable';
                            console.error(e);
                        }
                    }, err => {
                        el.style.fontSize = '10px';
                        el.textContent = 'Permission denied or unavailable';
                        console.warn(err);
                    }, { enableHighAccuracy: false, maximumAge: 60_000, timeout: 10_000 });
                })();

                /* ============================================================================ */
                /* GET NETWORK NAME */
                /* ============================================================================ */

                (async () => {
                    const el = document.querySelector('.Current_Network_Name');
                    if (!el) return;
                    el.style.fontSize = '10px';
                    el.textContent = '[Network Unavailable]';

                    try {
                        const resp = await fetch('https://api.ipify.org?format=json');
                        if (!resp.ok) throw new Error('network fetch failed');
                        const data = await resp.json();
                        const ip = data.ip || '';

                        // Simple hash to generate a pseudo network name from IP
                        let hash = 0;
                        for (let i = 0; i < ip.length; i++) {
                            hash = ((hash << 5) - hash) + ip.charCodeAt(i);
                            hash |= 0; // Convert to 32bit integer
                        }
                        const networkName = 'Net-' + Math.abs(hash).toString(36).toUpperCase().slice(0, 6);

                        el.style.fontSize = '10px';
                        el.textContent = networkName;
                    } catch (e) {
                        el.style.fontSize = '10px';
                        el.textContent = '[Network Unavailable]';
                        console.error(e);
                    }
                })();
            </script>
        </div>

        <!-- ============================================================================ //
        // START WINDOW //
        // ============================================================================ -->

        <div class="Window Start_Window" style="width:280px; height:220px;">
            <div class="Window_Header">
                <p class="Title">Start</p>
                <button class="Close_Button"></button>
            </div>
            <div class="Content">
                <div class="Paragraph">
                    <p>Welcome to Eden Economy! Please select your platform to continue.</p>
                </div>
                <div class="Start_Navigator">
                    <button class="Start_Navigator_Button" id="Start_Using_Desktop_System">[Desktop]</button>
                    <button class="Start_Navigator_Button" id="Start_Using_Phone_System">[Phone]</button>
                </div>
            </div>

            <style aria-label="Start_Window_Style">
                .Start {
                    width: 100dvw;
                    height: 100dvh;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }

                .Start_Window {
                    position: absolute;
                    
                }

                .Start_Window > .Content > .Paragraph {
                    position: absolute;
                    top: 40px;
                    color: var(--Main_Text_Color_1);
                    font-size: var(--Main_Text_2);
                    text-align: center;
                    width: 240px;
                }

                .Start_Window > .Content > .Start_Navigator {
                    position: absolute;
                    bottom: 20px;
                    width: 100%;
                    display: flex;
                    flex-direction: row;
                    gap: 20px;
                    justify-content: center;
                }

                .Start_Window > .Content > .Start_Navigator > .Start_Navigator_Button {
                    font-size: var(--Main_Text_2);
                }

            </style>

            <script aria-label="Start_Window_Script">
                
            </script>
        </div>

        <!-- ============================================================================ //
        // SUB WINDOWS //
        // ============================================================================ -->

        <div class="Sub_Windows">
           
        </div>
    </div>

    <div class="Boot_Sequense" style="display: none;">

        <div class="Boot_Wallpaper">
            <img class="Boot_Wallpaper_Image" src="Images/Wallpaper/Wallpaper_1.jpg" alt="Wallpaper 1">
            <div class="Boot_Glass">

            </div>
        </div>

        <div class="Boot_Sequense_Space">
            <p class="Boot_Sequense_Copy_Right">Eden Economy Web-World Market 2026 &#169</p>
            <br>
            <p class="Boot_Sequense_Start_String" style="display: none;">Starting Eden Economy...</p>
            <br>
            <br>
            <p class="Boot_Sequense_MIT_License" style="display: none;">MIT License

                Copyright (c) 2026 dtron7th Corporation
                <br>
                <br>

                Permission is hereby granted, free of charge, to any person obtaining a copy
                of this software and associated documentation files (the "Software"), to deal
                in the Software without restriction, including without limitation the rights
                to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                copies of the Software, and to permit persons to whom the Software is
                furnished to do so, subject to the following conditions:
                <br>
                <br>
                The above copyright notice and this permission notice shall be included in all
                copies or substantial portions of the Software.
                <br>
                <br>
                THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
                SOFTWARE.</p>

        </div>

        <style aria-label="Boot_Sequense_Style">
            .Boot_Sequense {
                position: absolute;
                top: 0;
                left: 0;
                width: 100dvw;
                height: 100dvh;
                display: flex;
            }

            .Boot_Wallpaper {
                width: 100dvw;
                height: 100dvh;
                z-index: -1;
            }

            .Boot_Wallpaper_Image {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            .Boot_Glass {
                position: absolute;
                top: 0;
                left: 0;
                width: 100dvw;
                height: 100dvh;
                backdrop-filter: blur(10px);
            }

            .Boot_Sequense > .Boot_Sequense_Space {
                position: absolute;
                top: 10px;
                left: 10px;
                text-align: left;
                color: var(--Main_Text_Color_1);
                font-size: var(--Main_Text_1);
            }

            .Boot_Sequense > .Boot_Sequense_Space > .Boot_Sequense_Copy_Right {
                font-size: var(--Main_Text_3);
                
            }

            .Boot_Sequense > .Boot_Sequense_Space > .Boot_Sequense_MIT_License {
                font-size: var(--Main_Text_1);
                width: 350px;
                text-align: left;
            }


        </style>
        
        <script aria-label="Boot_Sequense_Script">

            /* ============================================================================ */
            /* OPEN BOOT SEQUENCE */
            /* ============================================================================ */

            (() => {
                const btn = document.getElementById('Start_Using_Phone_System');
                const progress = document.querySelector('.Progress_Bar');
                const fill = progress ? progress.querySelector('.Progress_Bar_Fill') : null;
                const boot = document.getElementById('Boot_Sequense') || document.querySelector('.Boot_Sequense');
                const start = document.querySelector('.Start');

                if (!btn) return;

                btn.addEventListener('click', () => {
                    btn.disabled = true;
                    if (progress) progress.style.display = 'block';

                    const DURATION = 1000;
                    const PCTS = [20, 70, 100];
                    // times: spread events over the duration (you can tweak factors if desired)
                    const TIMES = PCTS.map((_, i, a) => Math.round(((i + 1) / a.length) * DURATION));

                    if (fill) {
                        fill.style.transition = 'none';
                        fill.style.width = '0%';
                        void fill.offsetWidth;

                        PCTS.forEach((pct, i) => {
                            setTimeout(() => {
                                fill.style.width = pct + '%';
                            }, TIMES[i]);
                        });

                        // Ensure final state at DURATION
                        setTimeout(() => {
                            fill.style.width = '100%';
                        }, DURATION);
                    }

                    setTimeout(() => {
                        document.querySelectorAll('.Dot_Grid').forEach(el => el.remove());
                        if (progress) progress.style.display = 'none';
                        if (start) start.style.display = 'none';
                        if (boot) boot.style.display = 'flex';
                    }, DURATION);
                });
            })();

            /* ============================================================================ */
            /* RUN BOOT SEQUENCE */
            /* ============================================================================ */

            //STARTING EDEN ECONOMY BOOT SEQUENCE

            (() => {
                const boot = document.getElementById('Boot_Sequense') || document.querySelector('.Boot_Sequense');
                const el = document.querySelector('.Boot_Sequense_Start_String');
                if (!boot || !el) return;

                let triggered = false;
                function triggerShow() {
                    if (triggered) return;
                    triggered = true;
                    setTimeout(() => el.style.display = 'block', 3000);
                }

                // If boot is already visible, start timer immediately
                if (getComputedStyle(boot).display !== 'none') {
                    triggerShow();
                }

                // Observe style/display changes on the boot container
                const mo = new MutationObserver(() => {
                    if (getComputedStyle(boot).display !== 'none') triggerShow();
                });
                mo.observe(boot, { attributes: true, attributeFilter: ['style'] });

                window.addEventListener('beforeunload', () => mo.disconnect());
            })();

            (() => {
                const el = document.querySelector('.Boot_Sequense_Start_String');
                if (!el) return;
                let played = false;

                function isDisplayed(e) {
                    return getComputedStyle(e).display !== 'none' && e.offsetParent !== null;
                }

                function playDosBeep() {
                    try {
                        const Ctx = window.AudioContext || window.webkitAudioContext;
                        if (!Ctx) return;
                        const ctx = new Ctx();
                        const now = ctx.currentTime;
                        const osc = ctx.createOscillator();
                        const gain = ctx.createGain();

                        osc.type = 'square';
                        osc.frequency.value = 800; // DOS-like pitch
                        gain.gain.setValueAtTime(0.0001, now);
                        gain.gain.exponentialRampToValueAtTime(0.18, now + 0.01);
                        gain.gain.exponentialRampToValueAtTime(0.0001, now + 0.18);

                        osc.connect(gain);
                        gain.connect(ctx.destination);

                        osc.start(now);
                        osc.stop(now + 0.2);

                        // close context after sound finishes (best-effort)
                        setTimeout(() => { if (ctx.close) ctx.close(); }, 400);
                    } catch (e) {
                        console.warn('Beep failed', e);
                    }
                }

                if (isDisplayed(el) && !played) {
                    playDosBeep();
                    played = true;
                }

                const mo = new MutationObserver(() => {
                    if (isDisplayed(el)) {
                        if (!played) {
                            playDosBeep();
                            played = true;
                        }
                    } else {
                        played = false;
                    }
                });

                mo.observe(el, { attributes: true, attributeFilter: ['style', 'class'] });
                window.addEventListener('beforeunload', () => mo.disconnect());
            })();

            (() => {
                const el = document.querySelector('.Boot_Sequense_Start_String');
                if (!el) return;
                const base = 'Starting Eden Economy';
                el.style.whiteSpace = 'pre';
                el.innerHTML = base + ' <span class="boot-dots"><span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></span>';

                const dots = Array.from(el.querySelectorAll('.boot-dots .dot'));
                dots.forEach(d => {
                    d.style.opacity = '0';
                    d.style.transition = 'none';
                    d.style.display = 'inline-block';
                    d.style.margin = '0 2px';
                });

                const seq = [
                    [1, 0, 0],
                    [1, 1, 0],
                    [1, 1, 1],
                    [0, 0, 0]
                ];

                let s = 0;
                const interval = 400;
                let id = null;
                const INITIAL_HIDE_MS = 4000;
                let startTimeoutId = null;

                function step() {
                    const state = seq[s];
                    dots.forEach((d, i) => d.style.opacity = state[i] ? '1' : '0');
                    s = (s + 1) % seq.length;
                }

                function startBlinking() {
                    if (id) return;
                    // ensure starting state
                    s = 0;
                    step();
                    id = setInterval(step, interval);
                }

                function stopBlinking() {
                    if (!id) return;
                    clearInterval(id);
                    id = null;
                    dots.forEach(d => d.style.opacity = '0');
                }

                function cancelPendingStart() {
                    if (startTimeoutId) {
                        clearTimeout(startTimeoutId);
                        startTimeoutId = null;
                    }
                }

                function startWithInitialHide() {
                    // hide dots immediately, then start animation after short delay
                    dots.forEach(d => d.style.opacity = '0');
                    cancelPendingStart();
                    startTimeoutId = setTimeout(() => {
                        startBlinking();
                        startTimeoutId = null;
                    }, INITIAL_HIDE_MS);
                }

                function isDisplayed(el) {
                    return getComputedStyle(el).display !== 'none' && el.offsetParent !== null;
                }

                // start with initial hide if already visible
                if (isDisplayed(el)) startWithInitialHide();

                // observe display/style changes on the element and start/stop accordingly
                const mo = new MutationObserver(() => {
                    if (isDisplayed(el)) startWithInitialHide();
                    else {
                        cancelPendingStart();
                        stopBlinking();
                    }
                });
                mo.observe(el, { attributes: true, attributeFilter: ['style', 'class'] });

                window.addEventListener('beforeunload', () => {
                    cancelPendingStart();
                    stopBlinking();
                    mo.disconnect();
                });
            })();

            // RUN EDEN ECONOMY CORPORATION OPEN SOURCE LEICENSE

            

            



            

            
        </script>
    </div>

    <div class="Login">

    </div>

    <div class="EEC_Main_1">

    </div>

    <div class="EEC_Main_2">

    </div>

    <div class="EEC_Main_3">

    </div>
    
    <script aria-label="Essentials_Script">

        /* ============================================================================ */
        /* DRAGGING ALL WINDOWS AND PANELS */
        /* ============================================================================ */

        // Enable dragging of any element with class "Window" by its child ".Window_Header"

        (() => {
            const headers = document.querySelectorAll('.Window_Header');
            headers.forEach(header => {
                // visual affordance
                header.style.cursor = 'grab';
                header.style.touchAction = 'none'; // allow pointer events without scrolling

                header.addEventListener('pointerdown', (ev) => {
                    const win = header.closest('.Window');
                    if (!win) return;

                    // ensure the window can be moved by absolute positioning
                    const rect = win.getBoundingClientRect();
                    const docLeft = rect.left + window.scrollX;
                    const docTop = rect.top + window.scrollY;
                    const computed = getComputedStyle(win);
                    if (computed.position === 'static') {
                        win.style.position = 'absolute';
                        win.style.left = `${docLeft}px`;
                        win.style.top = `${docTop}px`;
                    } else {
                        // make sure left/top are numbers we can use
                        if (!win.style.left) win.style.left = `${docLeft}px`;
                        if (!win.style.top) win.style.top = `${docTop}px`;
                    }

                    header.setPointerCapture(ev.pointerId);
                    header.style.cursor = 'grabbing';

                    const startX = ev.clientX;
                    const startY = ev.clientY;
                    const startLeft = parseFloat(win.style.left || docLeft);
                    const startTop = parseFloat(win.style.top || docTop);

                    function onPointerMove(e) {
                        const dx = e.clientX - startX;
                        const dy = e.clientY - startY;
                        win.style.left = `${Math.round(startLeft + dx)}px`;
                        win.style.top = `${Math.round(startTop + dy)}px`;
                    }

                    function onPointerUp(e) {
                        header.releasePointerCapture(e.pointerId);
                        header.style.cursor = 'grab';
                        document.removeEventListener('pointermove', onPointerMove);
                        document.removeEventListener('pointerup', onPointerUp);
                    }

                    document.addEventListener('pointermove', onPointerMove);
                    document.addEventListener('pointerup', onPointerUp);
                });
            });
        })();

        (() => {
            const GRID_X = 10;
            const GRID_Y = 10;

            function snapElementToGrid(el, gx = GRID_X, gy = GRID_Y) {
                if (!el) return;
                const rect = el.getBoundingClientRect();
                const docLeft = rect.left + window.scrollX;
                const docTop = rect.top + window.scrollY;

                let left = parseFloat(el.style.left);
                let top = parseFloat(el.style.top);
                if (!Number.isFinite(left)) left = docLeft;
                if (!Number.isFinite(top)) top = docTop;

                const snappedLeft = Math.round(left / gx) * gx;
                const snappedTop = Math.round(top / gy) * gy;

                el.style.left = snappedLeft + 'px';
                el.style.top = snappedTop + 'px';
            }

            // Track which window is being dragged
            let draggingWindow = null;
            document.querySelectorAll('.Window_Header').forEach(header => {
                header.addEventListener('pointerdown', () => {
                    draggingWindow = header.closest('.Window');
                });
            });

            // Snap when pointer is released â€” snap the dragged window and ensure all windows align
            document.addEventListener('pointerup', () => {
                if (draggingWindow) {
                    snapElementToGrid(draggingWindow);
                    draggingWindow = null;
                }
                document.querySelectorAll('.Window').forEach(w => snapElementToGrid(w));
            });

            // Optional: live snapping while dragging (throttled with requestAnimationFrame)
            let rafId = null;
            document.addEventListener('pointermove', () => {
                if (!draggingWindow) return;
                if (rafId) return;
                rafId = requestAnimationFrame(() => {
                    snapElementToGrid(draggingWindow);
                    rafId = null;
                });
            });
        })();

        (() => {
            // Clamp windows so they remain fully visible inside the viewport
            function clampWindowToViewport(win) {
                if (!win) return;
                const rect = win.getBoundingClientRect();
                const docLeft = rect.left + window.scrollX;
                const docTop = rect.top + window.scrollY;
                const width = rect.width;
                const height = rect.height;

                const vw = document.documentElement.clientWidth;
                const vh = document.documentElement.clientHeight;

                // document-scoped min/max (account for page scroll)
                const minLeft = window.scrollX;
                const minTop = window.scrollY;
                const maxLeft = Math.max(minLeft, window.scrollX + vw - width);
                const maxTop = Math.max(minTop, window.scrollY + vh - height);

                let left = parseFloat(win.style.left);
                let top = parseFloat(win.style.top);
                if (!Number.isFinite(left)) left = docLeft;
                if (!Number.isFinite(top)) top = docTop;

                const clampedLeft = Math.min(Math.max(left, minLeft), maxLeft);
                const clampedTop = Math.min(Math.max(top, minTop), maxTop);

                if (clampedLeft !== left) win.style.left = Math.round(clampedLeft) + 'px';
                if (clampedTop !== top) win.style.top = Math.round(clampedTop) + 'px';
            }

            // Throttle with rAF for smoothness
            let raf = null;
            function clampAllWindows() {
                if (raf) return;
                raf = requestAnimationFrame(() => {
                    document.querySelectorAll('.Window').forEach(clampWindowToViewport);
                    raf = null;
                });
            }

            // Keep windows inside viewport while dragging and when releasing/resizing/loading
            document.addEventListener('pointermove', clampAllWindows, { passive: true });
            document.addEventListener('pointerup', clampAllWindows);
            window.addEventListener('resize', clampAllWindows);
            window.addEventListener('load', clampAllWindows);
        })();

        /* ============================================================================ */
        /* BRING ACTIVE WINDOW TO FRONT */
        /* ============================================================================ */

        (() => {
            let topZ = 10;
            // initialize topZ from existing windows
            document.querySelectorAll('.Window').forEach(w => {
                const z = parseInt(getComputedStyle(w).zIndex, 10);
                if (Number.isFinite(z) && z >= topZ) topZ = z + 1;
                // make windows focusable so keyboard focus can also bring to front
                if (!w.hasAttribute('tabindex')) w.setAttribute('tabindex', '0');
                // bring to front when header or window gets pointerdown
                w.addEventListener('pointerdown', () => bringToFront(w));
                const hdr = w.querySelector('.Window_Header');
                if (hdr) hdr.addEventListener('pointerdown', (e) => { e.stopPropagation(); bringToFront(w); });
                // bring to front on focus (keyboard)
                w.addEventListener('focus', () => bringToFront(w));
            });

            function bringToFront(win) {
                if (!win) return;
                topZ += 1;
                win.style.zIndex = String(topZ);
                // optional active class for styling
                document.querySelectorAll('.Window').forEach(w => w.classList.toggle('active', w === win));
            }

            // expose for debugging if needed
            window.__bringWindowToFront = bringToFront;
        })();
    </script>
</body>
</html>


