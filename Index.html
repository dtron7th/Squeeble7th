<!DOCTYPE html>
<html lang="en">
<head style="display: none;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@200..900&display=swap" rel="stylesheet">


    <!--Book_Mark: Root_System-->

    <!-- :Root -->
    <style aria-label="Root">
        :root {

            --Main_UI_Color: rgb(0, 0, 0);
            --Header_UI_Color: rgba(0, 0, 0, 0);
            --Main_UI_Blur: 0px;
            --Main_UI_Border: 1px solid rgba(255, 255, 255, 0.178);
            
            --Main_UI_Border_Radius_Window: 10px;
            --Main_UI_Border_Radius_Button: 0px;

            --Main_Text_Color: rgb(255, 255, 255);

            --Main_Font_Size: 11px;

            --Box_Shadow: 0px 0px 10px rgba(0, 0, 0, 0.6);

            --Terminal_Background_Color: rgb(0, 0, 0);
            --Terminal_Text_Color: rgb(255, 255, 255);
            
        }

        /* ---- Global Terminal Cursor ---- */
        .terminal {
            caret-color: transparent;
        }
        .terminal-cursor {
            display: inline-block;
            width: 5px;
            height: 1.2em;
            background-color: var(--Terminal_Text_Color, #0f0);
            vertical-align: text-bottom;
            animation: terminal-blink 0.5s step-end infinite;
        }
        @keyframes terminal-blink {
            50% { opacity: 0; }
        }
    </style>



    <!--Book_Mark: Head : UI_Build-->
    <!-- UI -->
    <div aria-label="Build_UI">

        <!--Window-->
        <div class="Window">
            <div class="Header">
                <p class="Title"></p>
                <div class="Window_Manipulation">
                    <button class="Window_Minimize"></button>
                    <button class="Window_Maximize"></button>
                    <button class="Window_Close"></button>

                    <style aria-label="Window_Manipulation - Style">
                        .Window_Manipulation {
                            position: absolute;
                            right: 10px;
                            display: flex;
                            gap: 10px;
                        }

                        .Window_Manipulation > button {
                            width: 10px;
                            height: 10px;
                            border-radius: 50%;
                        }
                        .Window_Manipulation > .Window_Minimize {
                            background-color: rgb(255, 255, 0);
                        }

                        .Window_Manipulation > .Window_Maximize {
                            background-color: rgb(0, 255, 0);
                        }

                        .Window_Manipulation > .Window_Close {
                            background-color: rgb(255, 0, 0);
                        }

                        .Window_Close {
                            background-color: rgb(255, 0, 0);
                        }
                    </style>

                    <script aria-label="Window_Manipulation - Script">

                    </script>
                </div>

                <style aria-label="Header - Style">
                    
                </style>

                <script aria-label="Header - Script">

                </script>

            </div>
            <div class="Content">
                <style aria-label="Content - Style">

                </style>

                <script aria-label="Content - Script">
                    
                </script>
            </div>

            <style aria-label="Window - Style">

            </style>

            <script aria-label="Window - Script">

            </script>
        </div>

        <!--Panel-->
        <div class="Panel" id="">
            <p class="Title"></p>
            <button class="Panel_Close"></button>
            <div class="Panel_Buttons">

                <style aria-label="Panel_Buttons - Style">

                </style>

                <script aria-label="Panel_Buttons - Script">

                </script>
            </div>
            <style aria-label="Panel - Style">
                
            </style>

            <script aria-label="Panel - Script">

            </script>
        </div>
    </div>

    <!--Book_Mark: Head : Main_Style-->
        
    <!-- Main -->
    <style aria-label="Main">
        * {
            padding: 0px;
            margin: 0px;
            font-family: "Inconsolata", monospace;
            
        }

        body {
            background-color: rgb(0, 0, 0);
        }
    </style>
    
    <!--Book_Mark: UI_Style-->
    
    <!-- Main UI -->
    <style aria-label="UI">

        button {
            width: auto;
            height: auto;
            border: none;
            outline: none;
            background: none;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: var(--Main_Font_Size);
            border-radius: var(--Main_UI_Border_Radius_Button);
            color: var(--Main_Text_Color);
            -webkit-tap-highlight-color: transparent;
        }

        button:active {
            background-color: var(--Main_UI_Color);
        }

        .Panel {
            position: absolute;
            background-color: var(--Main_UI_Color);
            backdrop-filter: blur(var(--Main_UI_Blur));
            border: var(--Main_UI_Border);
            border-radius: var(--Main_UI_Border_Radius_Window);
            box-shadow: var(--Box_Shadow);
            display: flex;
            justify-content: center;
            align-items: center;
            display: none;

        }

        .Panel > .Title {
            position: absolute;
            top: 10px;
            color: var(--Main_Text_Color);
            font-size: var(--Main_Font_Size);
        }

        .Panel > .Panel_Close {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgb(255, 0, 0);
            color: var(--Main_Text_Color);
            font-size: var(--Main_Font_Size);
        }
        

        .Window {
            position: absolute;
            overflow: hidden;
            background-color: var(--Main_UI_Color);
            backdrop-filter: blur(var(--Main_UI_Blur));
            border: var(--Main_UI_Border);
            border-radius: var(--Main_UI_Border_Radius_Window);
            box-shadow: var(--Box_Shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            display: none;
        }

        .Window > .Header {
            width: 100%;
            height: 30px;
            background-color: var(--Header_UI_Color);
            display: flex;
            align-items: center;
        }

        .Window > .Header > .Title {
            position: absolute;
            left: 10px;
            color: var(--Main_Text_Color);
            font-size: var(--Main_Font_Size);
        }

        .Window > .Header > .Window_Manipulation {
            position: absolute;
            right: 10px;
            display: flex;
            gap: 10px;
        }

        .Window > .Header > .Window_Manipulation > button {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .Window > .Content {
            position: absolute;
            bottom: 0px;
            width: 100%;
            height: calc(100% - 30px);
            display: flex;
            justify-content: center;
        }

    </style>
    
    <!-- Prefabs -->
    <div class="Prefab">
        <div class="Build">

        </div>
        <style>

        </style>
        <Script>

        </Script>
    </div>

    <div aria-label="Componets">

        <!--Book_Mark: Clock-->
        <div class="_Clock">
            <p id="_Time">00:00:00:000</p>
            <p id="_Date">00/00/0000</p>

            <style aria-label="Login_Build_Clock - Style">
                ._Clock {
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    display: none;
                }

                ._Clock > p {
                    font-size: var(--Main_Font_Size);
                    color: rgb(255, 255, 255);
                }
                
                ._Clock > #_Date {
                    position: absolute;
                    right: 0px;
                }
            </style>

            <script aria-label="_Clock - Script">
                function updateClock() {
                    const now = new Date();
                    const hours = String(now.getHours()).padStart(2, '0');
                    const minutes = String(now.getMinutes()).padStart(2, '0');
                    const seconds = String(now.getSeconds()).padStart(2, '0');
                    const milliseconds = String(now.getMilliseconds()).padStart(3, '0');
                    document.getElementById('_Time').textContent = `${hours}:${minutes}:${seconds}:${milliseconds}`;
                    
                    const day = String(now.getDate()).padStart(2, '0');
                    const month = String(now.getMonth() + 1).padStart(2, '0');
                    const year = now.getFullYear();
                    document.getElementById('_Date').textContent = `${day}/${month}/${year}`;
                }
                updateClock();
                setInterval(updateClock, 10);
                
            </script>
        </div>

        <!--Book_Mark:  Components-->

        <div class="_Printable_Information">
            <p id="_Printable_Information_Wifi_Conntected"></p>
            
            <style aria-label="_Printable_Information - Style">
                ._Printable_Information {
                    position: absolute;
                    top: 60px;
                    right: 10px;
                    font-size: var(--Main_Font_Size);
                    display: none;
                }
            </style>
            <script aria-label="_Printable_Information - Script">

                const _Printable_Information_wifiElement = document.getElementById('_Printable_Information_Wifi_Conntected');

                    function updateWifiStatus() {
                        if (navigator.onLine) {
                            _Printable_Information_wifiElement.textContent = 'Wifi Connected';
                            _Printable_Information_wifiElement.style.color = 'green';
                        } else {
                            _Printable_Information_wifiElement.textContent = 'Wifi Disconnected';
                            _Printable_Information_wifiElement.style.color = 'red';
                        }
                    }

                    updateWifiStatus();
                    window.addEventListener('online', updateWifiStatus);
                    window.addEventListener('offline', updateWifiStatus);
            </script>
        </div>
    </div>

    <!--Book_Mark: Window_Manager-->

    <Script aria-label="Element_Manager">

        //Dragging system (Desktop and mobile)        


        //.Window
        (function() {
            let isDragging = false;
            let currentWindow = null;
            let offsetX = 0;
            let offsetY = 0;

            function clampPosition(x, y, element) {
                const rect = element.getBoundingClientRect();
                const maxX = window.innerWidth - rect.width;
                const maxY = window.innerHeight - rect.height;
                return {
                    x: Math.max(0, Math.min(x, maxX)),
                    y: Math.max(0, Math.min(y, maxY))
                };
            }

            document.addEventListener('mousedown', function(e) {
                const win = e.target.closest('.Window');
                if (win && !e.target.closest('.Window_Manipulation')) {
                    currentWindow = win;
                    isDragging = true;
                    const rect = currentWindow.getBoundingClientRect();
                    offsetX = e.clientX - rect.left;
                    offsetY = e.clientY - rect.top;
                    currentWindow.style.cursor = 'grabbing';
                }
            });

            document.addEventListener('mousemove', function(e) {
                if (isDragging && currentWindow) {
                    const newX = e.clientX - offsetX;
                    const newY = e.clientY - offsetY;
                    const clamped = clampPosition(newX, newY, currentWindow);
                    currentWindow.style.left = clamped.x + 'px';
                    currentWindow.style.top = clamped.y + 'px';
                }
            });

            document.addEventListener('mouseup', function() {
                if (currentWindow) {
                    currentWindow.style.cursor = '';
                }
                isDragging = false;
                currentWindow = null;
            });

            // Touch support
            document.addEventListener('touchstart', function(e) {
                const win = e.target.closest('.Window');
                if (win && !e.target.closest('.Window_Manipulation')) {
                    currentWindow = win;
                    isDragging = true;
                    const rect = currentWindow.getBoundingClientRect();
                    const touch = e.touches[0];
                    offsetX = touch.clientX - rect.left;
                    offsetY = touch.clientY - rect.top;
                }
            });

            document.addEventListener('touchmove', function(e) {
                if (isDragging && currentWindow) {
                    const touch = e.touches[0];
                    const newX = touch.clientX - offsetX;
                    const newY = touch.clientY - offsetY;
                    const clamped = clampPosition(newX, newY, currentWindow);
                    currentWindow.style.left = clamped.x + 'px';
                    currentWindow.style.top = clamped.y + 'px';
                    e.preventDefault();
                }
            }, { passive: false });

            document.addEventListener('touchend', function() {
                isDragging = false;
                currentWindow = null;
            });
        })();

        // Ensure opening elements stay on top
        (function() {
            function ensureOnTop(element) {
                const computedStyle = window.getComputedStyle(element);
                const isVisible = computedStyle.display !== 'none';
                const isOpening = element.classList.contains('element-opening');
                
                if (isVisible && isOpening) {
                    // Get current max z-index
                    const allElements = document.querySelectorAll('.Window, .Panel');
                    let maxZ = 100;
                    allElements.forEach(el => {
                        if (el !== element) {
                            const z = parseInt(window.getComputedStyle(el).zIndex) || 0;
                            if (z > maxZ) maxZ = z;
                        }
                    });
                    element.style.zIndex = Math.max(maxZ + 1, 2147483646);
                }
            }

            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    const target = mutation.target;
                    if (target.classList.contains('Window') || target.classList.contains('Panel')) {
                        ensureOnTop(target);
                    }
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
                const elements = document.querySelectorAll('.Window, .Panel');
                elements.forEach(el => {
                    observer.observe(el, { attributes: true, attributeFilter: ['class', 'style'] });
                });
            });
        })();


        //.Panel

        (function() {
            let isDragging = false;
            let currentPanel = null;
            let offsetX = 0;
            let offsetY = 0;

            function clampPosition(x, y, element) {
                const rect = element.getBoundingClientRect();
                const maxX = window.innerWidth - rect.width;
                const maxY = window.innerHeight - rect.height;
                return {
                    x: Math.max(0, Math.min(x, maxX)),
                    y: Math.max(0, Math.min(y, maxY))
                };
            }

            document.addEventListener('mousedown', function(e) {
                const panel = e.target.closest('.Panel');
                if (panel) {
                    currentPanel = panel;
                    isDragging = true;
                    const rect = currentPanel.getBoundingClientRect();
                    offsetX = e.clientX - rect.left;
                    offsetY = e.clientY - rect.top;
                    currentPanel.style.cursor = 'grabbing';
                }
            });

            document.addEventListener('mousemove', function(e) {
                if (isDragging && currentPanel) {
                    const newX = e.clientX - offsetX;
                    const newY = e.clientY - offsetY;
                    const clamped = clampPosition(newX, newY, currentPanel);
                    currentPanel.style.left = clamped.x + 'px';
                    currentPanel.style.top = clamped.y + 'px';
                }
            });

            document.addEventListener('mouseup', function() {
                if (currentPanel) {
                    currentPanel.style.cursor = '';
                }
                isDragging = false;
                currentPanel = null;
            });

            // Touch support
            document.addEventListener('touchstart', function(e) {
                const panel = e.target.closest('.Panel');
                if (panel) {
                    currentPanel = panel;
                    isDragging = true;
                    const rect = currentPanel.getBoundingClientRect();
                    const touch = e.touches[0];
                    offsetX = touch.clientX - rect.left;
                    offsetY = touch.clientY - rect.top;
                }
            });

            document.addEventListener('touchmove', function(e) {
                if (isDragging && currentPanel) {
                    const touch = e.touches[0];
                    const newX = touch.clientX - offsetX;
                    const newY = touch.clientY - offsetY;
                    const clamped = clampPosition(newX, newY, currentPanel);
                    currentPanel.style.left = clamped.x + 'px';
                    currentPanel.style.top = clamped.y + 'px';
                    e.preventDefault();
                }
            }, { passive: false });

            document.addEventListener('touchend', function() {
                isDragging = false;
                currentPanel = null;
            });
        })();
        


        //Snapping system.

        // Snapping system - snap windows to 10px grid

        //.Window
        (function() {
            const SNAP_SIZE = 10;

            function snapToGrid(value) {
                return Math.round(value / SNAP_SIZE) * SNAP_SIZE;
            }

            // Override mouseup to snap position
            document.addEventListener('mouseup', function(e) {
                const windows = document.querySelectorAll('.Window');
                windows.forEach(win => {
                    const rect = win.getBoundingClientRect();
                    win.style.left = snapToGrid(rect.left) + 'px';
                    win.style.top = snapToGrid(rect.top) + 'px';
                });
            });

            // Override touchend to snap position
            document.addEventListener('touchend', function(e) {
                const windows = document.querySelectorAll('.Window');
                windows.forEach(win => {
                    const rect = win.getBoundingClientRect();
                    win.style.left = snapToGrid(rect.left) + 'px';
                    win.style.top = snapToGrid(rect.top) + 'px';
                });
            });
        })();

        //.Panel

        (function() {
            const SNAP_SIZE = 10;

            function snapToGrid(value) {
                return Math.round(value / SNAP_SIZE) * SNAP_SIZE;
            }

            document.addEventListener('mouseup', function(e) {
                const panels = document.querySelectorAll('.Panel');
                panels.forEach(panel => {
                    const rect = panel.getBoundingClientRect();
                    panel.style.left = snapToGrid(rect.left) + 'px';
                    panel.style.top = snapToGrid(rect.top) + 'px';
                });
            });

            document.addEventListener('touchend', function(e) {
                const panels = document.querySelectorAll('.Panel');
                panels.forEach(panel => {
                    const rect = panel.getBoundingClientRect();
                    panel.style.left = snapToGrid(rect.left) + 'px';
                    panel.style.top = snapToGrid(rect.top) + 'px';
                });
            });
        })();

        //Bring to front when clicking on Window or Panel
        (function() {
            let zIndex = 100;

            document.addEventListener('mousedown', function(e) {
                const element = e.target.closest('.Window') || e.target.closest('.Panel');
                if (element) {
                    zIndex++;
                    element.style.zIndex = zIndex;
                }
            });

            document.addEventListener('touchstart', function(e) {
                const element = e.target.closest('.Window') || e.target.closest('.Panel');
                if (element) {
                    zIndex++;
                    element.style.zIndex = zIndex;
                }
            });
        })();

        //Book_Mark: Set Element Default Position.
        
        //Set default position for windows and panels when they open
        (function() {
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                        const element = mutation.target;
                        if (element.classList.contains('Window') || element.classList.contains('Panel')) {
                            const computedStyle = window.getComputedStyle(element);
                            if (computedStyle.display !== 'none') {
                                if (!element.dataset.positionSet) {
                                    element.style.top = '10px';
                                    element.style.left = '10px';
                                    element.dataset.positionSet = 'true';
                                }
                            } else {
                                delete element.dataset.positionSet;
                            }
                        }
                    }
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
                const elements = document.querySelectorAll('.Window, .Panel');
                elements.forEach(el => {
                    observer.observe(el, { attributes: true, attributeFilter: ['style'] });
                });
            });
        })();



        //Book_Mark: Element open animation.
                
        //Element open animation.

        (function() {
            const style = document.createElement('style');
            style.textContent = `
                @keyframes elementOpenAnimation {
                    0% {
                        opacity: 0;
                        transform: scale(0.85) translateY(20px);
                        filter: blur(4px);
                    }
                    50% {
                        opacity: 0.8;
                        filter: blur(1px);
                    }
                    100% {
                        opacity: 1;
                        transform: scale(1) translateY(0);
                        filter: blur(0);
                    }
                }

                .Window.element-opening,
                .Panel.element-opening {
                    animation: elementOpenAnimation 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards !important;
                }
            `;
            document.head.appendChild(style);

            const elementStates = new WeakMap();

            document.addEventListener('DOMContentLoaded', function() {
                const elements = document.querySelectorAll('.Window, .Panel');
                elements.forEach(el => {
                    const computedStyle = window.getComputedStyle(el);
                    elementStates.set(el, computedStyle.display !== 'none');
                });
            });

            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'style') {
                        const el = mutation.target;
                        if (el.classList.contains('Window') || el.classList.contains('Panel')) {
                            const computedStyle = window.getComputedStyle(el);
                            const isVisible = computedStyle.display !== 'none';
                            const wasVisible = elementStates.get(el) || false;

                            if (isVisible && !wasVisible && !el.classList.contains('element-opening')) {
                                el.classList.add('element-opening');
                                el.addEventListener('animationend', function handler() {
                                    el.classList.remove('element-opening');
                                    el.removeEventListener('animationend', handler);
                                });
                            }

                            elementStates.set(el, isVisible);
                        }
                    }
                });
            });

            document.addEventListener('DOMContentLoaded', function() {
                const elements = document.querySelectorAll('.Window, .Panel');
                elements.forEach(el => {
                    observer.observe(el, { attributes: true, attributeFilter: ['style'] });
                });
            });

            window.openElement = function(el) {
                if (typeof el === 'string') {
                    el = document.querySelector(el);
                }
                if (!el) return;
                
                el.classList.remove('element-opening');
                el.style.display = 'flex';
                void el.offsetWidth;
                el.classList.add('element-opening');
                
                el.addEventListener('animationend', function handler() {
                    el.classList.remove('element-opening');
                    el.removeEventListener('animationend', handler);
                });

                elementStates.set(el, true);
            };

            window.closeElement = function(el) {
                if (typeof el === 'string') {
                    el = document.querySelector(el);
                }
                if (!el) return;
                
                el.style.display = 'none';
                elementStates.set(el, false);
            };
        })();

    </Script>

    <div class="Keyboard">
        <div class="Keyboard_Build">

            <!--Tab Bar-->
            <div class="Keyboard_Tabs">
                <button class="Keyboard_Tab active" data-layer="1">ABC</button>
                <button class="Keyboard_Tab" data-layer="2">Fn</button>
                <button class="Keyboard_Tab" data-layer="3">Sci</button>
                <button class="Keyboard_Tab" data-layer="4">PT</button>
                <button class="Keyboard_Tab Keyboard_Tab--close Window_Close" data-action="close"></button>
            </div>

            <!--Layer 1: Alphanumeric-->
            <div class="Keyboard_Layer" id="Keyboard_Layer_1">
                <!--Sub-layer A: Normal Keys-->
                <div class="Keyboard_Sub" id="Keyboard_Sub_Normal">
                    <div class="Keyboard_Row">
                        <button class="key" data-key="`">`</button>
                        <button class="key" data-key="1">1</button>
                        <button class="key" data-key="2">2</button>
                        <button class="key" data-key="3">3</button>
                        <button class="key" data-key="4">4</button>
                        <button class="key" data-key="5">5</button>
                        <button class="key" data-key="6">6</button>
                        <button class="key" data-key="7">7</button>
                        <button class="key" data-key="8">8</button>
                        <button class="key" data-key="9">9</button>
                        <button class="key" data-key="0">0</button>
                        <button class="key" data-key="-">-</button>
                        <button class="key" data-key="=">=</button>
                        <button class="key key--w2" data-action="backspace">⌫</button>
                    </div>
                    <div class="Keyboard_Row">
                        <button class="key key--w15" data-action="tab">Tab</button>
                        <button class="key" data-key="q">q</button>
                        <button class="key" data-key="w">w</button>
                        <button class="key" data-key="e">e</button>
                        <button class="key" data-key="r">r</button>
                        <button class="key" data-key="t">t</button>
                        <button class="key" data-key="y">y</button>
                        <button class="key" data-key="u">u</button>
                        <button class="key" data-key="i">i</button>
                        <button class="key" data-key="o">o</button>
                        <button class="key" data-key="p">p</button>
                        <button class="key" data-key="[">[</button>
                        <button class="key" data-key="]">]</button>
                        <button class="key key--w15" data-key="\">\</button>
                    </div>
                    <div class="Keyboard_Row">
                        <button class="key key--w18" data-action="caps">Caps</button>
                        <button class="key" data-key="a">a</button>
                        <button class="key" data-key="s">s</button>
                        <button class="key" data-key="d">d</button>
                        <button class="key" data-key="f">f</button>
                        <button class="key" data-key="g">g</button>
                        <button class="key" data-key="h">h</button>
                        <button class="key" data-key="j">j</button>
                        <button class="key" data-key="k">k</button>
                        <button class="key" data-key="l">l</button>
                        <button class="key" data-key=";">;</button>
                        <button class="key" data-key="'">'</button>
                        <button class="key key--w2 key--enter" data-action="enter">Enter</button>
                    </div>
                    <div class="Keyboard_Row">
                        <button class="key key--w22" data-action="shift">⇧ Shift</button>
                        <button class="key" data-key="z">z</button>
                        <button class="key" data-key="x">x</button>
                        <button class="key" data-key="c">c</button>
                        <button class="key" data-key="v">v</button>
                        <button class="key" data-key="b">b</button>
                        <button class="key" data-key="n">n</button>
                        <button class="key" data-key="m">m</button>
                        <button class="key" data-key=",">,</button>
                        <button class="key" data-key=".">.</button>
                        <button class="key" data-key="/">/</button>
                        <button class="key key--w22" data-action="shift">⇧ Shift</button>
                    </div>
                </div>
                <!--Sub-layer B: Symbols-->
                <div class="Keyboard_Sub" id="Keyboard_Sub_Symbols" style="display:none;">
                    <div class="Keyboard_Row">
                        <button class="key" data-key="~">~</button>
                        <button class="key" data-key="!">!</button>
                        <button class="key" data-key="@">@</button>
                        <button class="key" data-key="#">#</button>
                        <button class="key" data-key="$">$</button>
                        <button class="key" data-key="%">%</button>
                        <button class="key" data-key="^">^</button>
                        <button class="key" data-key="&">&amp;</button>
                        <button class="key" data-key="*">*</button>
                        <button class="key" data-key="(">(</button>
                        <button class="key" data-key=")">)</button>
                        <button class="key" data-key="_">_</button>
                        <button class="key" data-key="+">+</button>
                        <button class="key key--w2" data-action="backspace">⌫</button>
                    </div>
                    <div class="Keyboard_Row">
                        <button class="key" data-key="{">{</button>
                        <button class="key" data-key="}">}</button>
                        <button class="key" data-key="|">|</button>
                        <button class="key" data-key=":">:</button>
                        <button class="key" data-key='"'>"</button>
                        <button class="key" data-key="<">&lt;</button>
                        <button class="key" data-key=">">&gt;</button>
                        <button class="key" data-key="?">?</button>
                    </div>
                    <div class="Keyboard_Row">
                        <button class="key" data-key="[">[</button>
                        <button class="key" data-key="]">]</button>
                        <button class="key" data-key="\">\</button>
                        <button class="key" data-key=";">;</button>
                        <button class="key" data-key="'">'</button>
                        <button class="key" data-key=",">,</button>
                        <button class="key" data-key=".">.</button>
                        <button class="key" data-key="/">/</button>
                    </div>
                    <div class="Keyboard_Row">
                        <button class="key" data-key="`">`</button>
                        <button class="key" data-key="-">-</button>
                        <button class="key" data-key="=">=</button>
                        <button class="key key--w15" data-action="tab">Tab</button>
                        <button class="key key--w2 key--enter" data-action="enter">Enter</button>
                    </div>
                </div>
                <!--Bottom row (always visible)-->
                <div class="Keyboard_Row">
                    <button class="key key--action key--toggle" data-action="sub-toggle" id="Keyboard_Sub_Toggle">?#=</button>
                    <button class="key key--space" data-key=" ">Space</button>
                    <button class="key key--action" data-action="backspace">⌫</button>
                </div>
            </div>

            <!--Layer 2: Function Keys + Control Pad + Arrow Pad + Numpad-->
            <div class="Keyboard_Layer" id="Keyboard_Layer_2" style="display:none;">
                <div class="Keyboard_Row">
                    <button class="key" data-key="Escape">Esc</button>
                    <button class="key" data-key="F1">F1</button>
                    <button class="key" data-key="F2">F2</button>
                    <button class="key" data-key="F3">F3</button>
                    <button class="key" data-key="F4">F4</button>
                    <button class="key" data-key="F5">F5</button>
                    <button class="key" data-key="F6">F6</button>
                </div>
                <div class="Keyboard_Row">
                    <button class="key" data-key="PrintScreen">PrtSc</button>
                    <button class="key" data-key="F7">F7</button>
                    <button class="key" data-key="F8">F8</button>
                    <button class="key" data-key="F9">F9</button>
                    <button class="key" data-key="F10">F10</button>
                    <button class="key" data-key="F11">F11</button>
                    <button class="key" data-key="F12">F12</button>
                </div>
                <div class="Keyboard_Layer_Section">
                    <div class="Keyboard_Layer_Block">
                        <div class="Keyboard_Block_Label">Control Pad</div>
                        <div class="Keyboard_Row">
                            <button class="key" data-key="Insert">Ins</button>
                            <button class="key" data-key="Home">Home</button>
                            <button class="key" data-key="PageUp">PgUp</button>
                        </div>
                        <div class="Keyboard_Row">
                            <button class="key" data-key="Delete">Del</button>
                            <button class="key" data-key="End">End</button>
                            <button class="key" data-key="PageDown">PgDn</button>
                        </div>
                        <div class="Keyboard_Block_Label">Arrows</div>
                        <div class="Keyboard_Row" style="justify-content:center">
                            <button class="key key--arrow" data-key="ArrowUp">▲</button>
                        </div>
                        <div class="Keyboard_Row" style="justify-content:center">
                            <button class="key key--arrow" data-key="ArrowLeft">◄</button>
                            <button class="key key--arrow" data-key="ArrowDown">▼</button>
                            <button class="key key--arrow" data-key="ArrowRight">►</button>
                        </div>
                    </div>
                    <div class="Keyboard_Layer_Block">
                        <div class="Keyboard_Block_Label">Numpad</div>
                        <div class="Keyboard_Row">
                            <button class="key" data-key="NumLock">Num</button>
                            <button class="key" data-key="/">/</button>
                            <button class="key" data-key="*">*</button>
                            <button class="key" data-key="-">-</button>
                        </div>
                        <div class="Keyboard_Row">
                            <button class="key" data-key="7">7</button>
                            <button class="key" data-key="8">8</button>
                            <button class="key" data-key="9">9</button>
                            <button class="key key--npad-plus" data-key="+">+</button>
                        </div>
                        <div class="Keyboard_Row">
                            <button class="key" data-key="4">4</button>
                            <button class="key" data-key="5">5</button>
                            <button class="key" data-key="6">6</button>
                        </div>
                        <div class="Keyboard_Row">
                            <button class="key" data-key="1">1</button>
                            <button class="key" data-key="2">2</button>
                            <button class="key" data-key="3">3</button>
                            <button class="key key--npad-enter key--enter" data-action="enter">↵</button>
                        </div>
                        <div class="Keyboard_Row">
                            <button class="key key--w2" data-key="0">0</button>
                            <button class="key" data-key=".">.</button>
                        </div>
                    </div>
                </div>
            </div>

            <!--Layer 3: Scientific Calculator-->
            <div class="Keyboard_Layer" id="Keyboard_Layer_3" style="display:none;">
                <div class="SciCalc">
                    <div class="SciCalc_Display">
                        <div class="SciCalc_Expr" id="SciCalc_Expr"></div>
                        <div class="SciCalc_Result" id="SciCalc_Result">0</div>
                    </div>
                    <div class="SciCalc_Mode">
                        <button class="key key--mode active" id="SciCalc_Deg" data-calc="deg">DEG</button>
                        <button class="key key--mode" id="SciCalc_Rad" data-calc="rad">RAD</button>
                        <button class="key key--mode" data-calc="mc">MC</button>
                        <button class="key key--mode" data-calc="mr">MR</button>
                        <button class="key key--mode" data-calc="mplus">M+</button>
                        <button class="key key--mode" data-calc="mminus">M−</button>
                    </div>
                    <div class="SciCalc_Grid">
                        <button class="key key--fn" data-calc="sin">sin</button>
                        <button class="key key--fn" data-calc="cos">cos</button>
                        <button class="key key--fn" data-calc="tan">tan</button>
                        <button class="key key--fn" data-calc="log">log</button>
                        <button class="key key--fn" data-calc="ln">ln</button>

                        <button class="key key--fn" data-calc="asin">sin⁻¹</button>
                        <button class="key key--fn" data-calc="acos">cos⁻¹</button>
                        <button class="key key--fn" data-calc="atan">tan⁻¹</button>
                        <button class="key key--fn" data-calc="sqrt">√</button>
                        <button class="key key--fn" data-calc="cbrt">³√</button>

                        <button class="key key--fn" data-calc="pow2">x²</button>
                        <button class="key key--fn" data-calc="pow3">x³</button>
                        <button class="key key--fn" data-calc="pown">xⁿ</button>
                        <button class="key key--fn" data-calc="inv">1/x</button>
                        <button class="key key--fn" data-calc="abs">|x|</button>

                        <button class="key key--fn" data-calc="pi">π</button>
                        <button class="key key--fn" data-calc="e">e</button>
                        <button class="key key--fn" data-calc="fact">n!</button>
                        <button class="key key--fn" data-calc="exp">EXP</button>
                        <button class="key key--fn" data-calc="mod">mod</button>

                        <button class="key key--op" data-calc="(">(</button>
                        <button class="key key--op" data-calc=")">)</button>
                        <button class="key key--op" data-calc="%">%</button>
                        <button class="key key--op key--ce" data-calc="ce">CE</button>
                        <button class="key key--op key--ce" data-calc="ac">AC</button>

                        <button class="key" data-calc="7">7</button>
                        <button class="key" data-calc="8">8</button>
                        <button class="key" data-calc="9">9</button>
                        <button class="key key--op" data-calc="÷">÷</button>
                        <button class="key key--op" data-calc="⌫">⌫</button>

                        <button class="key" data-calc="4">4</button>
                        <button class="key" data-calc="5">5</button>
                        <button class="key" data-calc="6">6</button>
                        <button class="key key--op" data-calc="×">×</button>
                        <button class="key key--fn" data-calc="pow10">10ⁿ</button>

                        <button class="key" data-calc="1">1</button>
                        <button class="key" data-calc="2">2</button>
                        <button class="key" data-calc="3">3</button>
                        <button class="key key--op" data-calc="-">−</button>
                        <button class="key key--fn" data-calc="toggle">±</button>

                        <button class="key" data-calc="0">0</button>
                        <button class="key" data-calc=".">.</button>
                        <button class="key key--eq" data-calc="=">=</button>
                        <button class="key key--op" data-calc="+">+</button>
                        <button class="key key--fn" data-calc="insert">INS</button>
                    </div>
                </div>
            </div>

            <!--Layer 4: Periodic Table-->
            <div class="Keyboard_Layer" id="Keyboard_Layer_4" style="display:none;">
                <div class="PT">
                    <div class="PT_Info" id="PT_Info">
                        <span class="PT_Info_Prompt">Tap an element to view details</span>
                    </div>
                    <div class="PT_Grid" id="PT_Grid"></div>
                </div>
            </div>

        </div>

        <style aria-label="Keyboard - Style">
            /* ---- Main Container ---- */
            .Keyboard {
                position: fixed;
                bottom: 0;
                left: 0;
                width: 100%;
                background-color: #1b1b1b;
                padding: 0 4px 6px;
                box-sizing: border-box;
                display: none;
                justify-content: center;
                z-index: 9999;
                max-height: 70vh;
                overflow-y: auto;
            }
            .Keyboard_Build {
                display: flex;
                flex-direction: column;
                width: 100%;
                max-width: 960px;
                margin: 0 auto;
            }

            /* ---- Tab Bar ---- */
            .Keyboard_Tabs {
                display: flex;
                gap: 2px;
                padding: 4px 0;
                border-bottom: 1px solid #333;
                margin-bottom: 6px;
                position: sticky;
                top: 0;
                background: #1b1b1b;
                z-index: 1;
            }
            .Keyboard_Tab {
                flex: 1;
                height: 30px;
                background: #2a2a2a;
                border: none;
                border-radius: 6px 6px 0 0;
                color: #888;
                font-size: 13px;
                font-family: inherit;
                cursor: pointer;
                transition: background 0.1s, color 0.1s;
            }
            .Keyboard_Tab.active {
                background: #3a3a3a;
                color: #fff;
            }
            .Keyboard_Tab--close {
                flex: 0.4;
                color: #f44;
                font-size: 16px;
            }

            /* ---- Layers ---- */
            .Keyboard_Layer {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            .Keyboard_Sub {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            .Keyboard .key--toggle {
                flex: 1.2;
                background-color: #2a2a2a;
                color: #8ab4f8;
                font-size: 13px;
                font-weight: bold;
            }
            .Keyboard .key--toggle.active {
                background-color: #4285f4;
                color: #fff;
            }

            /* ---- Rows & Keys ---- */
            .Keyboard_Row {
                display: flex;
                gap: 3px;
                width: 100%;
            }
            .Keyboard .key {
                flex: 1;
                height: 38px;
                min-width: 0;
                background-color: #3a3a3a;
                border: none;
                border-radius: 6px;
                color: #e8e8e8;
                font-size: 14px;
                font-family: inherit;
                cursor: pointer;
                display: flex;
                justify-content: center;
                align-items: center;
                user-select: none;
                padding: 0 2px;
                white-space: nowrap;
                overflow: hidden;
                -webkit-tap-highlight-color: transparent;
                transition: background-color 0.08s;
                box-shadow: 0 1px 0 rgba(0,0,0,0.3);
            }
            .Keyboard .key:active { background-color: #555; }
            .Keyboard .key.active { background-color: #4285f4; color: #fff; }
            .Keyboard .key.caps-active { background-color: #4285f4; color: #fff; }

            /* Width variants */
            .Keyboard .key--w15 { flex: 1.5; }
            .Keyboard .key--w18 { flex: 1.8; }
            .Keyboard .key--w2 { flex: 2; }
            .Keyboard .key--w22 { flex: 2.2; }
            .Keyboard .key--action { flex: 1; background-color: #2a2a2a; color: #aaa; font-size: 13px; }
            .Keyboard .key--space { flex: 6; border-radius: 16px; }
            .Keyboard .key--enter { background-color: #4285f4; color: #fff; }
            .Keyboard .key--enter:active { background-color: #5a9cf5; }

            /* ---- Layer 2: Sections ---- */
            .Keyboard_Layer_Section {
                display: flex;
                gap: 12px;
                margin-top: 4px;
            }
            .Keyboard_Layer_Block {
                flex: 1;
                display: flex;
                flex-direction: column;
                gap: 3px;
            }
            .Keyboard_Block_Label {
                font-size: 10px;
                color: #666;
                text-transform: uppercase;
                letter-spacing: 1px;
                padding: 2px 4px;
            }
            .Keyboard .key--arrow {
                flex: 0 0 44px;
                height: 36px;
                font-size: 16px;
            }
            .Keyboard .key--npad-plus { grid-row: span 2; }
            .Keyboard .key--npad-enter { grid-row: span 2; }

            /* ---- Layer 3: Scientific Calculator ---- */
            .SciCalc {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            .SciCalc_Display {
                background: #111;
                border-radius: 8px;
                padding: 8px 12px;
                text-align: right;
                min-height: 54px;
            }
            .SciCalc_Expr {
                font-size: 13px;
                color: #888;
                min-height: 16px;
                word-break: break-all;
            }
            .SciCalc_Result {
                font-size: 28px;
                color: #fff;
                font-family: "Inconsolata", monospace;
            }
            .SciCalc_Mode {
                display: flex;
                gap: 3px;
            }
            .SciCalc_Grid {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 3px;
            }
            .Keyboard .key--fn {
                background-color: #2a2a2a;
                color: #8ab4f8;
                font-size: 12px;
            }
            .Keyboard .key--op {
                background-color: #333;
                color: #f8c66b;
                font-size: 16px;
            }
            .Keyboard .key--ce { color: #f44; }
            .Keyboard .key--eq {
                background-color: #4285f4;
                color: #fff;
                font-size: 18px;
            }
            .Keyboard .key--mode {
                flex: 1;
                height: 28px;
                font-size: 11px;
                background: #222;
                color: #777;
                border-radius: 4px;
            }
            .Keyboard .key--mode.active { background: #333; color: #4285f4; }

            /* ---- Layer 4: Periodic Table ---- */
            .PT {
                display: flex;
                flex-direction: column;
                gap: 6px;
            }
            .PT_Info {
                background: #111;
                border-radius: 8px;
                padding: 6px 10px;
                min-height: 42px;
                display: flex;
                align-items: center;
                gap: 12px;
                color: #ccc;
                font-size: 13px;
            }
            .PT_Info_Prompt { color: #666; font-style: italic; }
            .PT_Info_Number { font-size: 11px; color: #888; }
            .PT_Info_Symbol { font-size: 24px; font-weight: bold; color: #fff; }
            .PT_Info_Name { font-size: 14px; color: #ccc; }
            .PT_Info_Mass { font-size: 11px; color: #888; }
            .PT_Info_Detail { display: flex; flex-direction: column; }
            .PT_Grid {
                display: grid;
                grid-template-columns: repeat(18, 1fr);
                gap: 2px;
                overflow-x: auto;
            }
            .PT_Grid .pt-el {
                width: 100%;
                aspect-ratio: 1;
                min-width: 0;
                border: none;
                border-radius: 3px;
                font-size: 9px;
                font-family: inherit;
                cursor: pointer;
                display: flex;
                justify-content: center;
                align-items: center;
                color: #fff;
                padding: 0;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
                transition: transform 0.1s, outline 0.1s;
            }
            .PT_Grid .pt-el:active { transform: scale(1.3); z-index: 2; }
            .PT_Grid .pt-el.selected { outline: 2px solid #fff; z-index: 2; }
            .PT_Grid .pt-spacer { visibility: hidden; }

            /* Element category colors */
            .pt-alkali { background: #8b4513; }
            .pt-alkaline { background: #b8860b; }
            .pt-transition { background: #4682b4; }
            .pt-post-trans { background: #5f9ea0; }
            .pt-metalloid { background: #6b8e23; }
            .pt-nonmetal { background: #2e8b57; }
            .pt-halogen { background: #008080; }
            .pt-noble { background: #483d8b; }
            .pt-lanthanide { background: #8b008b; }
            .pt-actinide { background: #800000; }

            /* ---- Mobile ---- */
            @media (max-width: 600px) {
                .Keyboard { padding: 0 2px 4px; }
                .Keyboard_Layer { gap: 3px; }
                .Keyboard_Row { gap: 2px; }
                .Keyboard .key { height: 34px; font-size: 12px; border-radius: 4px; }
                .Keyboard .key--arrow { flex: 0 0 36px; height: 32px; }
                .SciCalc_Result { font-size: 22px; }
                .SciCalc_Grid { gap: 2px; }
                .Keyboard .key--fn { font-size: 10px; }
                .PT_Grid .pt-el { font-size: 7px; }
            }
        </style>

        <script aria-label="Keyboard - Script">
            (function() {
                var keyboard = document.querySelector('.Keyboard');
                if (!keyboard) return;

                var activeInput = null, capsLock = false, shiftActive = false, cursorPos = 0;

                // ===== Text helpers =====
                function getText(el) { return el ? (el.isContentEditable ? (el.textContent||'') : (el.value||'')) : ''; }
                function setText(el, v) { if(!el)return; el.isContentEditable ? (el.textContent=v) : (el.value=v); el.dispatchEvent(new Event('input',{bubbles:true})); }
                function insertText(c) { if(!activeInput)return; var t=getText(activeInput),p=Math.min(cursorPos,t.length); setText(activeInput,t.slice(0,p)+c+t.slice(p)); cursorPos=p+c.length; }
                function doBackspace() { if(!activeInput)return; var t=getText(activeInput),p=Math.min(cursorPos,t.length); if(p>0){setText(activeInput,t.slice(0,p-1)+t.slice(p));cursorPos=p-1;} }
                function updateKeyLabels() {
                    var upper = capsLock !== shiftActive;
                    keyboard.querySelectorAll('.key[data-key]').forEach(function(k) {
                        var v = k.dataset.key;
                        if (v.length===1 && /[a-z]/i.test(v)) k.textContent = upper ? v.toUpperCase() : v.toLowerCase();
                    });
                }

                // ===== Suppress native keyboard =====
                function suppressNative() {
                    document.querySelectorAll('input,textarea,[contenteditable="true"]').forEach(function(el) {
                        el.setAttribute('inputmode','none');
                        el.setAttribute('virtualkeyboardpolicy','manual');
                    });
                }
                suppressNative();
                document.addEventListener('DOMContentLoaded', suppressNative);

                // ===== Tab switching =====
                function switchLayer(num) {
                    for (var i = 1; i <= 4; i++) {
                        var layer = document.getElementById('Keyboard_Layer_' + i);
                        if (layer) layer.style.display = (i == num) ? 'flex' : 'none';
                    }
                    keyboard.querySelectorAll('.Keyboard_Tab[data-layer]').forEach(function(tab) {
                        tab.classList.toggle('active', tab.dataset.layer == num);
                    });
                }

                keyboard.querySelectorAll('.Keyboard_Tab').forEach(function(tab) {
                    tab.addEventListener('pointerup', function(e) {
                        e.preventDefault(); e.stopPropagation();
                        if (this.dataset.action === 'close') {
                            keyboard.style.display = 'none'; activeInput = null;
                        } else if (this.dataset.layer) {
                            switchLayer(this.dataset.layer);
                        }
                    });
                });

                // ===== Show keyboard on editable tap =====
                function activateTarget(el) { activeInput = el; cursorPos = getText(el).length; keyboard.style.display = 'flex'; }

                document.addEventListener('pointerup', function(e) {
                    if (keyboard.contains(e.target)) return;
                    var t = e.target.closest('[contenteditable="true"]') || e.target.closest('input') || e.target.closest('textarea');
                    if (t) activateTarget(t);
                    else keyboard.style.display = 'none';
                });

                // ===== Layer 1 & 2: Key press handler =====
                keyboard.querySelectorAll('#Keyboard_Layer_1 .key, #Keyboard_Layer_2 .key').forEach(function(key) {
                    key.addEventListener('pointerup', function(e) {
                        e.preventDefault(); e.stopPropagation();
                        if (!activeInput) {
                            var fb = document.getElementById('Login_Window_Content_Terminal_Main_Text');
                            if (fb) activateTarget(fb); else return;
                        }
                        var kv = this.dataset.key, act = this.dataset.action;
                        if (kv) {
                            var ch = kv;
                            if (kv.length===1 && /[a-z]/i.test(kv)) ch = (capsLock!==shiftActive) ? kv.toUpperCase() : kv.toLowerCase();
                            insertText(ch);
                            if (shiftActive) { shiftActive=false; keyboard.querySelectorAll('[data-action="shift"]').forEach(function(b){b.classList.remove('active');}); updateKeyLabels(); }
                        } else if (act) {
                            switch(act) {
                                case 'backspace': doBackspace(); break;
                                case 'enter': if(activeInput.tagName==='TEXTAREA'||activeInput.isContentEditable) insertText('\n'); break;
                                case 'caps': capsLock=!capsLock; keyboard.querySelectorAll('[data-action="caps"]').forEach(function(b){b.classList.toggle('caps-active',capsLock);}); updateKeyLabels(); break;
                                case 'shift': shiftActive=!shiftActive; keyboard.querySelectorAll('[data-action="shift"]').forEach(function(b){b.classList.toggle('active',shiftActive);}); updateKeyLabels(); break;
                                case 'tab': insertText('\t'); break;
                                case 'sub-toggle':
                                    var subN = document.getElementById('Keyboard_Sub_Normal');
                                    var subS = document.getElementById('Keyboard_Sub_Symbols');
                                    var togBtn = document.getElementById('Keyboard_Sub_Toggle');
                                    if (subN && subS && togBtn) {
                                        var showing = subS.style.display !== 'none';
                                        subN.style.display = showing ? 'flex' : 'none';
                                        subS.style.display = showing ? 'none' : 'flex';
                                        togBtn.textContent = showing ? '?#=' : 'ABC';
                                        togBtn.classList.toggle('active', !showing);
                                    }
                                    break;
                            }
                        }
                    });
                });

                // ===== Layer 3: Scientific Calculator =====
                (function() {
                    var expr = '', result = '0', memory = 0, degMode = true, waitingForPow = false;
                    var elExpr = document.getElementById('SciCalc_Expr');
                    var elResult = document.getElementById('SciCalc_Result');
                    if (!elExpr || !elResult) return;

                    function updDisp() { elExpr.textContent = expr; elResult.textContent = result; }
                    function toRad(d) { return degMode ? d * Math.PI / 180 : d; }
                    function fromRad(r) { return degMode ? r * 180 / Math.PI : r; }
                    function fact(n) { if(n<0)return NaN; if(n<=1)return 1; var r=1; for(var i=2;i<=n;i++)r*=i; return r; }

                    function evalExpr() {
                        try {
                            var e = expr.replace(/×/g,'*').replace(/÷/g,'/').replace(/−/g,'-');
                            var r = Function('"use strict"; return (' + e + ')')();
                            return isFinite(r) ? r : 'Error';
                        } catch(x) { return 'Error'; }
                    }

                    keyboard.querySelectorAll('#Keyboard_Layer_3 .key[data-calc]').forEach(function(btn) {
                        btn.addEventListener('pointerup', function(e) {
                            e.preventDefault(); e.stopPropagation();
                            var c = this.dataset.calc, num = parseFloat(result);

                            if (waitingForPow && /^[0-9.]$/.test(c)) {
                                expr += c; result = c; updDisp(); return;
                            }
                            if (waitingForPow && c === '=') { waitingForPow = false; }

                            switch(c) {
                                case '0':case '1':case '2':case '3':case '4':
                                case '5':case '6':case '7':case '8':case '9':case '.':
                                    if (result==='0' && c!=='.') result = c;
                                    else if (result==='Error'||result==='0') result = (c==='.'?'0.':c);
                                    else result += c;
                                    expr += c; updDisp(); break;
                                case '+':case '-':case '×':case '÷':
                                    expr += c; result = '0'; updDisp(); break;
                                case '(':case ')':case '%':
                                    expr += c; updDisp(); break;
                                case '=':
                                    var r = evalExpr();
                                    result = (typeof r==='number') ? String(parseFloat(r.toPrecision(12))) : String(r);
                                    expr = result; updDisp(); break;
                                case 'ac': expr=''; result='0'; updDisp(); break;
                                case 'ce': result='0'; updDisp(); break;
                                case '⌫':
                                    if (expr.length>0) expr = expr.slice(0,-1);
                                    if (result.length>1) result = result.slice(0,-1); else result='0';
                                    updDisp(); break;
                                case 'sin': result=String(parseFloat(Math.sin(toRad(num)).toPrecision(12))); expr='sin('+num+')'; updDisp(); break;
                                case 'cos': result=String(parseFloat(Math.cos(toRad(num)).toPrecision(12))); expr='cos('+num+')'; updDisp(); break;
                                case 'tan': result=String(parseFloat(Math.tan(toRad(num)).toPrecision(12))); expr='tan('+num+')'; updDisp(); break;
                                case 'asin': result=String(parseFloat(fromRad(Math.asin(num)).toPrecision(12))); expr='asin('+num+')'; updDisp(); break;
                                case 'acos': result=String(parseFloat(fromRad(Math.acos(num)).toPrecision(12))); expr='acos('+num+')'; updDisp(); break;
                                case 'atan': result=String(parseFloat(fromRad(Math.atan(num)).toPrecision(12))); expr='atan('+num+')'; updDisp(); break;
                                case 'log': result=String(parseFloat(Math.log10(num).toPrecision(12))); expr='log('+num+')'; updDisp(); break;
                                case 'ln': result=String(parseFloat(Math.log(num).toPrecision(12))); expr='ln('+num+')'; updDisp(); break;
                                case 'sqrt': result=String(parseFloat(Math.sqrt(num).toPrecision(12))); expr='√('+num+')'; updDisp(); break;
                                case 'cbrt': result=String(parseFloat(Math.cbrt(num).toPrecision(12))); expr='³√('+num+')'; updDisp(); break;
                                case 'pow2': result=String(num*num); expr=num+'²'; updDisp(); break;
                                case 'pow3': result=String(num*num*num); expr=num+'³'; updDisp(); break;
                                case 'pown': expr=num+'^'; waitingForPow=true; updDisp(); break;
                                case 'pow10': expr='10^'; waitingForPow=true; result='0'; updDisp(); break;
                                case 'inv': result=String(parseFloat((1/num).toPrecision(12))); expr='1/'+num; updDisp(); break;
                                case 'abs': result=String(Math.abs(num)); expr='|'+num+'|'; updDisp(); break;
                                case 'fact': result=String(fact(Math.round(num))); expr=Math.round(num)+'!'; updDisp(); break;
                                case 'pi': result=String(Math.PI); expr+='π'; updDisp(); break;
                                case 'e': result=String(Math.E); expr+='e'; updDisp(); break;
                                case 'exp': expr+='e'; updDisp(); break;
                                case 'mod': expr+='%'; updDisp(); break;
                                case 'toggle': num=-num; result=String(num); expr=String(num); updDisp(); break;
                                case 'deg':
                                    degMode=true;
                                    document.getElementById('SciCalc_Deg').classList.add('active');
                                    document.getElementById('SciCalc_Rad').classList.remove('active');
                                    break;
                                case 'rad':
                                    degMode=false;
                                    document.getElementById('SciCalc_Rad').classList.add('active');
                                    document.getElementById('SciCalc_Deg').classList.remove('active');
                                    break;
                                case 'mc': memory=0; break;
                                case 'mr': result=String(memory); expr=String(memory); updDisp(); break;
                                case 'mplus': memory+=num; break;
                                case 'mminus': memory-=num; break;
                                case 'insert':
                                    if (activeInput) insertText(result);
                                    break;
                            }
                        });
                    });
                })();

                // ===== Layer 4: Periodic Table =====
                (function() {
                    var grid = document.getElementById('PT_Grid');
                    var info = document.getElementById('PT_Info');
                    if (!grid || !info) return;

                    var E = [
                        [1,'H','Hydrogen',1.008,'nonmetal',1,1],
                        [2,'He','Helium',4.003,'noble',1,18],
                        [3,'Li','Lithium',6.941,'alkali',2,1],
                        [4,'Be','Beryllium',9.012,'alkaline',2,2],
                        [5,'B','Boron',10.81,'metalloid',2,13],
                        [6,'C','Carbon',12.01,'nonmetal',2,14],
                        [7,'N','Nitrogen',14.01,'nonmetal',2,15],
                        [8,'O','Oxygen',16.00,'nonmetal',2,16],
                        [9,'F','Fluorine',19.00,'halogen',2,17],
                        [10,'Ne','Neon',20.18,'noble',2,18],
                        [11,'Na','Sodium',22.99,'alkali',3,1],
                        [12,'Mg','Magnesium',24.31,'alkaline',3,2],
                        [13,'Al','Aluminium',26.98,'post-trans',3,13],
                        [14,'Si','Silicon',28.09,'metalloid',3,14],
                        [15,'P','Phosphorus',30.97,'nonmetal',3,15],
                        [16,'S','Sulfur',32.07,'nonmetal',3,16],
                        [17,'Cl','Chlorine',35.45,'halogen',3,17],
                        [18,'Ar','Argon',39.95,'noble',3,18],
                        [19,'K','Potassium',39.10,'alkali',4,1],
                        [20,'Ca','Calcium',40.08,'alkaline',4,2],
                        [21,'Sc','Scandium',44.96,'transition',4,3],
                        [22,'Ti','Titanium',47.87,'transition',4,4],
                        [23,'V','Vanadium',50.94,'transition',4,5],
                        [24,'Cr','Chromium',52.00,'transition',4,6],
                        [25,'Mn','Manganese',54.94,'transition',4,7],
                        [26,'Fe','Iron',55.85,'transition',4,8],
                        [27,'Co','Cobalt',58.93,'transition',4,9],
                        [28,'Ni','Nickel',58.69,'transition',4,10],
                        [29,'Cu','Copper',63.55,'transition',4,11],
                        [30,'Zn','Zinc',65.38,'transition',4,12],
                        [31,'Ga','Gallium',69.72,'post-trans',4,13],
                        [32,'Ge','Germanium',72.63,'metalloid',4,14],
                        [33,'As','Arsenic',74.92,'metalloid',4,15],
                        [34,'Se','Selenium',78.97,'nonmetal',4,16],
                        [35,'Br','Bromine',79.90,'halogen',4,17],
                        [36,'Kr','Krypton',83.80,'noble',4,18],
                        [37,'Rb','Rubidium',85.47,'alkali',5,1],
                        [38,'Sr','Strontium',87.62,'alkaline',5,2],
                        [39,'Y','Yttrium',88.91,'transition',5,3],
                        [40,'Zr','Zirconium',91.22,'transition',5,4],
                        [41,'Nb','Niobium',92.91,'transition',5,5],
                        [42,'Mo','Molybdenum',95.95,'transition',5,6],
                        [43,'Tc','Technetium',98,'transition',5,7],
                        [44,'Ru','Ruthenium',101.1,'transition',5,8],
                        [45,'Rh','Rhodium',102.9,'transition',5,9],
                        [46,'Pd','Palladium',106.4,'transition',5,10],
                        [47,'Ag','Silver',107.9,'transition',5,11],
                        [48,'Cd','Cadmium',112.4,'transition',5,12],
                        [49,'In','Indium',114.8,'post-trans',5,13],
                        [50,'Sn','Tin',118.7,'post-trans',5,14],
                        [51,'Sb','Antimony',121.8,'metalloid',5,15],
                        [52,'Te','Tellurium',127.6,'metalloid',5,16],
                        [53,'I','Iodine',126.9,'halogen',5,17],
                        [54,'Xe','Xenon',131.3,'noble',5,18],
                        [55,'Cs','Caesium',132.9,'alkali',6,1],
                        [56,'Ba','Barium',137.3,'alkaline',6,2],
                        [57,'La','Lanthanum',138.9,'lanthanide',9,3],
                        [58,'Ce','Cerium',140.1,'lanthanide',9,4],
                        [59,'Pr','Praseodymium',140.9,'lanthanide',9,5],
                        [60,'Nd','Neodymium',144.2,'lanthanide',9,6],
                        [61,'Pm','Promethium',145,'lanthanide',9,7],
                        [62,'Sm','Samarium',150.4,'lanthanide',9,8],
                        [63,'Eu','Europium',152.0,'lanthanide',9,9],
                        [64,'Gd','Gadolinium',157.3,'lanthanide',9,10],
                        [65,'Tb','Terbium',158.9,'lanthanide',9,11],
                        [66,'Dy','Dysprosium',162.5,'lanthanide',9,12],
                        [67,'Ho','Holmium',164.9,'lanthanide',9,13],
                        [68,'Er','Erbium',167.3,'lanthanide',9,14],
                        [69,'Tm','Thulium',168.9,'lanthanide',9,15],
                        [70,'Yb','Ytterbium',173.0,'lanthanide',9,16],
                        [71,'Lu','Lutetium',175.0,'lanthanide',9,17],
                        [72,'Hf','Hafnium',178.5,'transition',6,4],
                        [73,'Ta','Tantalum',180.9,'transition',6,5],
                        [74,'W','Tungsten',183.8,'transition',6,6],
                        [75,'Re','Rhenium',186.2,'transition',6,7],
                        [76,'Os','Osmium',190.2,'transition',6,8],
                        [77,'Ir','Iridium',192.2,'transition',6,9],
                        [78,'Pt','Platinum',195.1,'transition',6,10],
                        [79,'Au','Gold',197.0,'transition',6,11],
                        [80,'Hg','Mercury',200.6,'transition',6,12],
                        [81,'Tl','Thallium',204.4,'post-trans',6,13],
                        [82,'Pb','Lead',207.2,'post-trans',6,14],
                        [83,'Bi','Bismuth',209.0,'post-trans',6,15],
                        [84,'Po','Polonium',209,'post-trans',6,16],
                        [85,'At','Astatine',210,'halogen',6,17],
                        [86,'Rn','Radon',222,'noble',6,18],
                        [87,'Fr','Francium',223,'alkali',7,1],
                        [88,'Ra','Radium',226,'alkaline',7,2],
                        [89,'Ac','Actinium',227,'actinide',10,3],
                        [90,'Th','Thorium',232.0,'actinide',10,4],
                        [91,'Pa','Protactinium',231.0,'actinide',10,5],
                        [92,'U','Uranium',238.0,'actinide',10,6],
                        [93,'Np','Neptunium',237,'actinide',10,7],
                        [94,'Pu','Plutonium',244,'actinide',10,8],
                        [95,'Am','Americium',243,'actinide',10,9],
                        [96,'Cm','Curium',247,'actinide',10,10],
                        [97,'Bk','Berkelium',247,'actinide',10,11],
                        [98,'Cf','Californium',251,'actinide',10,12],
                        [99,'Es','Einsteinium',252,'actinide',10,13],
                        [100,'Fm','Fermium',257,'actinide',10,14],
                        [101,'Md','Mendelevium',258,'actinide',10,15],
                        [102,'No','Nobelium',259,'actinide',10,16],
                        [103,'Lr','Lawrencium',266,'actinide',10,17],
                        [104,'Rf','Rutherfordium',267,'transition',7,4],
                        [105,'Db','Dubnium',268,'transition',7,5],
                        [106,'Sg','Seaborgium',269,'transition',7,6],
                        [107,'Bh','Bohrium',270,'transition',7,7],
                        [108,'Hs','Hassium',277,'transition',7,8],
                        [109,'Mt','Meitnerium',278,'transition',7,9],
                        [110,'Ds','Darmstadtium',281,'transition',7,10],
                        [111,'Rg','Roentgenium',282,'transition',7,11],
                        [112,'Cn','Copernicium',285,'transition',7,12],
                        [113,'Nh','Nihonium',286,'post-trans',7,13],
                        [114,'Fl','Flerovium',289,'post-trans',7,14],
                        [115,'Mc','Moscovium',290,'post-trans',7,15],
                        [116,'Lv','Livermorium',293,'post-trans',7,16],
                        [117,'Ts','Tennessine',294,'halogen',7,17],
                        [118,'Og','Oganesson',294,'noble',7,18]
                    ];

                    // Build grid: 10 rows x 18 cols (rows 1-7 main, row 8 gap, row 9 lanthanides, row 10 actinides)
                    var cells = {};
                    E.forEach(function(el) { cells[el[5] + ',' + el[6]] = el; });

                    // Lanthanide/actinide placeholders in main table
                    cells['6,3'] = cells['6,3'] || null;
                    cells['7,3'] = cells['7,3'] || null;

                    for (var r = 1; r <= 10; r++) {
                        if (r === 8) {
                            // Gap row
                            for (var gc = 1; gc <= 18; gc++) {
                                var spacer = document.createElement('div');
                                spacer.className = 'pt-spacer';
                                grid.appendChild(spacer);
                            }
                            continue;
                        }
                        for (var c = 1; c <= 18; c++) {
                            var el = cells[r + ',' + c];
                            if (el) {
                                var btn = document.createElement('button');
                                btn.className = 'pt-el pt-' + el[4];
                                btn.textContent = el[1];
                                btn.dataset.z = el[0];
                                btn.dataset.sym = el[1];
                                btn.dataset.name = el[2];
                                btn.dataset.mass = el[3];
                                btn.dataset.cat = el[4];
                                grid.appendChild(btn);
                            } else {
                                // Placeholder for La/Ac markers
                                if ((r===6 && c===3)) {
                                    var m = document.createElement('button');
                                    m.className = 'pt-el pt-lanthanide';
                                    m.textContent = 'La-Lu';
                                    m.style.fontSize = '7px';
                                    grid.appendChild(m);
                                } else if ((r===7 && c===3)) {
                                    var m2 = document.createElement('button');
                                    m2.className = 'pt-el pt-actinide';
                                    m2.textContent = 'Ac-Lr';
                                    m2.style.fontSize = '7px';
                                    grid.appendChild(m2);
                                } else {
                                    var sp = document.createElement('div');
                                    sp.className = 'pt-spacer';
                                    grid.appendChild(sp);
                                }
                            }
                        }
                    }

                    // Click handler for periodic table elements
                    grid.addEventListener('pointerup', function(e) {
                        e.preventDefault(); e.stopPropagation();
                        var btn = e.target.closest('.pt-el');
                        if (!btn || !btn.dataset.z) return;

                        grid.querySelectorAll('.pt-el.selected').forEach(function(b) { b.classList.remove('selected'); });
                        btn.classList.add('selected');

                        info.innerHTML =
                            '<span class="PT_Info_Number">' + btn.dataset.z + '</span>' +
                            '<span class="PT_Info_Symbol">' + btn.dataset.sym + '</span>' +
                            '<div class="PT_Info_Detail">' +
                                '<span class="PT_Info_Name">' + btn.dataset.name + '</span>' +
                                '<span class="PT_Info_Mass">' + btn.dataset.mass + ' u · ' + btn.dataset.cat + '</span>' +
                            '</div>';

                        if (activeInput) insertText(btn.dataset.sym);
                    });
                })();

                // ===== Global API =====
                window.toggleKeyboardCaps = function() { capsLock=!capsLock; keyboard.querySelectorAll('[data-action="caps"]').forEach(function(b){b.classList.toggle('caps-active',capsLock);}); updateKeyLabels(); };
                window.openKeyboard = function(el) { if(el) activateTarget(el); else keyboard.style.display='flex'; };
                window.closeKeyboard = function() { keyboard.style.display='none'; activeInput=null; };
            })();
        </script>
    </div>

</head>
<body>

    <!--Book_Mark: Cursor-->    
    
    <div class="Cursor">
        <div class="Cursor_Build">
            <span id="Cursor_Pointer"></span>
        </div>
        <style>
            #Cursor_Pointer {
                position: absolute;
                width: 5px;
                height: 5px;
                border-radius: 50%;
                background-color: rgb(255, 255, 255);
                z-index: 100;
            }
        </style>
        <Script>
            document.addEventListener('DOMContentLoaded', function() {
                const cursorPointer = document.getElementById('Cursor_Pointer');
                
                // Hide default cursor on all elements
                document.documentElement.style.cursor = 'none';
                document.body.style.cursor = 'none';
                
                // Apply cursor:none to all elements
                const style = document.createElement('style');
                style.textContent = '* { cursor: none !important; }';
                document.head.appendChild(style);
                
                // Make cursor non-interactive so clicks pass through
                cursorPointer.style.pointerEvents = 'none';
                cursorPointer.style.zIndex = '2147483647';
                cursorPointer.style.position = 'fixed';
                
                document.addEventListener('mousemove', function(e) {
                    cursorPointer.style.left = e.clientX + 'px';
                    cursorPointer.style.top = e.clientY + 'px';
                });
                
                // Hide custom cursor when mouse leaves window
                document.addEventListener('mouseleave', function() {
                    cursorPointer.style.display = 'none';
                });
                
                // Show custom cursor when mouse enters window
                document.addEventListener('mouseenter', function() {
                    cursorPointer.style.display = 'block';
                });
                
                // Touch support - cursor follows touch point during drag
                document.addEventListener('touchstart', function(e) {
                    const touch = e.touches[0];
                    cursorPointer.style.left = touch.clientX + 'px';
                    cursorPointer.style.top = touch.clientY + 'px';
                    cursorPointer.style.display = 'block';
                });
                
                document.addEventListener('touchmove', function(e) {
                    const touch = e.touches[0];
                    cursorPointer.style.left = touch.clientX + 'px';
                    cursorPointer.style.top = touch.clientY + 'px';
                });
                
                document.addEventListener('touchend', function() {
                    cursorPointer.style.display = 'flex';
                });
            });
            
        </Script>
    </div>

    
    

    <div class="Login">
        <div class="Login_Build">

            <!--Book_Mark: Wallpaper_Slide_Show-->
            <div class="Wallpaper_Slide_Show">
                <div class="Wallpapers_List">
                    <img src="/Images/Wallpaper/3d-render-gradient-1080x2160-9736.jpg" alt="">
                </div>

                <style aria-label="Wallpaper_Slide_Show - Style">
                    .Wallpaper_Slide_Show > .Wallpapers_List > img {
                        height: 100dvh;
                        width: 100dvw;
                        background-size: contain;
                        display: none;
                    }
                </style>
            </div>

            <!--Book_Mark: Start_Button-->

            <div class="Start_Button">
                <button id="Start_Button">[ Start ]</button>

                <style aria-label="Login_Build_Start_Button - Style">
                    .Start_Button {
                        position: absolute;
                        bottom: 20px;
                    }
                    #Start_Button { 
                        font-size: 14px;
                        color: rgb(255, 255, 255);
                    }
                </style>
                <script aria-label="Start_Button - Script">
                    document.getElementById('Start_Button').addEventListener('click', function() {
                        document.getElementById('Start_Menu_Panel').style.display = 'flex';
                    });

                    document.getElementById('Start_Button').addEventListener('click', function() {
                        document.getElementById('Start_Button').style.display = 'none';
                    });

                    document.getElementById('Start_Button').addEventListener('click', function() {
                        if (document.documentElement.requestFullscreen) {
                            document.documentElement.requestFullscreen();
                        } else if (document.documentElement.webkitRequestFullscreen) {
                            document.documentElement.webkitRequestFullscreen();
                        } else if (document.documentElement.msRequestFullscreen) {
                            document.documentElement.msRequestFullscreen();
                        }
                    });
                    

                </script>
            </div>

            <!--Book_Mark: Login_Builld - Start_Menu_Panel-->
            <div class="Panel" id="Start_Menu_Panel">
                <p class="Title">Start Menu</p>
                <button class="Panel_Close" id="Start_Menu_Panel_Close"></button>
                <div class="Start_Menu_Panel_Buttons">
                    <button id="Start_Menu_Panel_Login">[ Login ]</button>
                    <button>[ Character Index ]</button>
                    <button>[ About Vista D-Net ]</button>
                    <button>[ D-Wifi Connections ]</button>
                    <button>[ Reset to original OS ]</button>
                    <button>[ Load from disk ]</button>
                    <button>[ Themes ]</button>
                    <button>[ Author ]</button>
                    <button id="Start_Menu_Panel_Exit">[ Exit Page ]</button>

                    <style aria-label="Start_Menu_Panel_Buttons - Style">

                    </style>

                    <script aria-label="Start_Menu_Panel_Buttons - Script">

                        document.getElementById('Start_Menu_Panel_Login').addEventListener('click', function() {
                            document.getElementById('Login_Window').style.display = 'flex';
                        });

                        document.getElementById('Start_Menu_Panel_Exit').addEventListener('click', function() {
                            if (document.exitFullscreen) {
                                document.exitFullscreen();
                            } else if (document.webkitExitFullscreen) {
                                document.webkitExitFullscreen();
                            } else if (document.msExitFullscreen) {
                                document.msExitFullscreen();
                            }
                        });

                    </script>
                </div>
                
                        
                <!--Book_Mark: Login_Builld - Start_Menu_Panel - Style-->
                <style aria-label="Start_Menu_Panel - Style">
                    #Start_Menu_Panel {
                        width: 180px;
                        height: 250px;
                        display: flex;
                        flex-direction: column;
                        align-items: flex-start;
                        gap: 10px;
                        text-indent: 10px;
                        display: none;
                    }

                    #Start_Menu_Panel > .Start_Menu_Panel_Buttons {
                        position: absolute;
                        top: 60px;
                        left: 10px;
                        width: auto;
                        height: auto;
                        display: flex;
                        align-items: flex-start;
                        flex-direction: column;
                        gap: 10px;
                    }
                </style>

                <script aria-label="Start_Menu_Panel - Script">
                    document.getElementById('Start_Menu_Panel_Close').addEventListener('click', function() {
                        document.getElementById('Start_Menu_Panel').style.display = 'none';
                    });

                    document.getElementById('Start_Menu_Panel_Close').addEventListener('click', function() {
                        document.getElementById('Start_Button').style.display = 'flex';
                    });
                </script>
            </div>

            

            <!--Book_Mark: Login_Build - Login_Window-->
            <div class="Window" id="Login_Window">
                <div class="Header" id="Login_Window-_Header">
                    <p class="Title">Login</p>
                    <div class="Window_Manipulation">
                        <button class="Window_Minimize" id="Login_Window_Minimize"></button>
                        <button class="Window_Maximize" id="Login_Window_Maximize"></button>
                        <button class="Window_Close" id="Login_Window_Close"></button>
                    </div>
                </div>
                <div class="Content" id="Login_Window_Content_Terminal">
                    <p id="Login_Window_Content_Terminal_Main_Text" class="terminal" contenteditable="true" tabindex="0" spellcheck="false"></p>

                    <!--Book_Mark: Login_Build - Login_Window_Content_Terminal - Style-->
                    <style aria-label="Login_Window_Content_Terminal - Style"> 
                        #Login_Window_Content_Terminal {
                            background-color: var(--Terminal_Background_Color);
                            
                        }

                        #Login_Window_Content_Terminal_Main_Text {
                            position: absolute;  
                            top: 10px;
                            left: 10px;                     
                            width: calc(100% - 20px);
                            height: calc(100% - 20px);
                            color: var(--Terminal_Text_Color);
                            overflow: auto;
                            overflow-anchor: none;
                            white-space: pre-wrap;
                            line-height: 1.45;
                            outline: none;
                        }
                    </style>

                    <script aria-label="Login_Window_Content_Terminal - Script">
                        (function() {
                            const terminalText = document.getElementById('Login_Window_Content_Terminal_Main_Text');
                            if (!terminalText) return;
                            const isAndroid = /android/i.test(navigator.userAgent || '');

                            const PROMPT = '//User: ';
                            let transcriptHeader = 'Vista-D-NET Corporation 2026 - AI Agent : Kimi K2.5\n\n';
                            let transcriptInstructions = 'Vista-D-NET Login.\n\nFor Login: Type [Login]\nFor Signup: Type [Signup]\nTo close window: Type [Close]\n\n';
                            let transcript = '';
                            let currentInput = '';
                            let loginMode = false;
                            let loginStep = '';
                            let loginData = { firstName: '', lastName: '', password: '' };
                            let rendering = false;

                            const customCommands = {};

                            function clearTerminalData() {
                                transcript = '';
                                currentInput = '';
                                loginMode = false;
                                loginStep = '';
                                loginData = { firstName: '', lastName: '', password: '' };
                            }

                            function printLine(text) {
                                const line = text == null ? '' : String(text);
                                transcript += line + '\n';
                            }

                            function getPromptLabel() {
                                if (loginMode && loginStep === 'firstName') return '\nFirst Name: ';
                                if (loginMode && loginStep === 'lastName') return '\nLast Name: ';
                                if (loginMode && loginStep === 'password') return '\nPassword: ';
                                return PROMPT;
                            }

                            function getDisplayInput() {
                                if (loginMode && loginStep === 'password') return '*'.repeat(currentInput.length);
                                return currentInput;
                            }

                            function placeCaretAtEnd() {
                                if (isAndroid) return;
                                try {
                                    terminalText.focus({ preventScroll: true });
                                } catch (err) {
                                    terminalText.focus();
                                }
                                var range = document.createRange();
                                range.selectNodeContents(terminalText);
                                range.collapse(false);
                                var sel = window.getSelection();
                                if (!sel) return;
                                sel.removeAllRanges();
                                sel.addRange(range);
                            }

                            var shouldScrollToBottom = true;
                            var terminalTextNode = document.createTextNode('');
                            var terminalCursorNode = document.createElement('span');
                            terminalCursorNode.className = 'terminal-cursor';
                            terminalText.innerHTML = '';
                            terminalText.appendChild(terminalTextNode);
                            terminalText.appendChild(terminalCursorNode);

                            function render() {
                                rendering = true;
                                var scrollTop = terminalText.scrollTop;
                                var wasAtBottom = (terminalText.scrollHeight - terminalText.scrollTop - terminalText.clientHeight) < 5;
                                var prompt = getPromptLabel();
                                var display = getDisplayInput();
                                terminalTextNode.nodeValue = transcriptHeader + transcriptInstructions + transcript + prompt + display;
                                if (terminalCursorNode.parentNode !== terminalText) {
                                    terminalText.appendChild(terminalCursorNode);
                                }
                                if (shouldScrollToBottom || wasAtBottom) {
                                    terminalText.scrollTop = terminalText.scrollHeight;
                                } else {
                                    terminalText.scrollTop = scrollTop;
                                }
                                shouldScrollToBottom = false;
                                placeCaretAtEnd();
                                setTimeout(function() { rendering = false; }, 0);
                            }

                            async function generateSHA256(text) {
                                try {
                                    var encoder = new TextEncoder();
                                    var data = encoder.encode(text);
                                    var hashBuffer = await crypto.subtle.digest('SHA-256', data);
                                    var hashArray = Array.from(new Uint8Array(hashBuffer));
                                    var hashHex = hashArray.map(function(b) { return b.toString(16).padStart(2, '0'); }).join('');
                                    return { success: true, hash: hashHex };
                                } catch (err) {
                                    return { success: false, error: err && err.message ? err.message : 'Unknown error generating SHA-256 hash' };
                                }
                            }

                            async function executeCommand(raw) {
                                var input = (raw || '').trim();

                                if (loginMode && loginStep === 'firstName') {
                                    if (!input) {
                                        printLine('First Name is required.');
                                        return;
                                    }
                                    loginData.firstName = input;
                                    transcript += 'First Name: ' + input + '\n';
                                    loginStep = 'lastName';
                                    printLine('Enter Last Name.');
                                    return;
                                }

                                if (loginMode && loginStep === 'lastName') {
                                    if (!input) {
                                        printLine('Last Name is required.');
                                        return;
                                    }
                                    loginData.lastName = input;
                                    transcript += 'Last Name: ' + input + '\n';
                                    loginStep = 'password';
                                    printLine('Enter Password.');
                                    return;
                                }

                                if (loginMode && loginStep === 'password') {
                                    if (!input) {
                                        printLine('Password is required.');
                                        return;
                                    }
                                    loginData.password = input;
                                    transcript += 'Password: ' + '*'.repeat(input.length) + '\n\n';

                                    var combined = loginData.firstName + loginData.lastName + loginData.password;
                                    var result = await generateSHA256(combined);

                                    if (result.success) {
                                        printLine('Login successful!');
                                        printLine('SHA-256 Hash: ' + result.hash + '\n');
                                    } else {
                                        printLine('Error: Failed to generate SHA-256 hash.');
                                        printLine('Details: ' + result.error + '\n');
                                    }

                                    loginMode = false;
                                    loginStep = '';
                                    loginData = { firstName: '', lastName: '', password: '' };
                                    return;
                                }

                                transcript += PROMPT + raw + '\n';
                                if (!input) return;

                                var parts = input.split(/\s+/);
                                var commandName = parts[0].toLowerCase();
                                var args = parts.slice(1);

                                if (commandName === 'login') {
                                    loginMode = true;
                                    loginStep = 'firstName';
                                    printLine('Login started. Enter First Name.');
                                    return;
                                }

                                if (commandName === 'signup') {
                                    printLine('Signup command received.');
                                    return;
                                }

                                if (commandName === 'close') {
                                    clearTerminalData();
                                    render();
                                    document.getElementById('Login_Window').style.display = 'none';
                                    return;
                                }

                                if (customCommands[commandName]) {
                                    try {
                                        customCommands[commandName].run({
                                            args: args,
                                            print: printLine,
                                            clear: function() { transcript = ''; },
                                            terminal: terminalText,
                                            activeInput: terminalText
                                        });
                                    } catch (err) {
                                        printLine('Custom command error: ' + (err && err.message ? err.message : err));
                                    }
                                    return;
                                }

                                printLine('Unknown command: ' + commandName);
                            }

                            async function syncInputFromDom() {
                                var full = terminalText.textContent || '';
                                var prompt = getPromptLabel();
                                var baseText = transcriptHeader + transcriptInstructions + transcript + prompt;

                                if (full.slice(0, baseText.length) !== baseText) {
                                    render();
                                    return;
                                }

                                var domInput = full.slice(baseText.length).replace(/\r/g, '');

                                if (domInput.indexOf('\n') !== -1) {
                                    var firstLine = domInput.split('\n')[0];
                                    if (loginMode && loginStep === 'password') {
                                        currentInput = firstLine.replace(/\*/g, '');
                                    } else {
                                        currentInput = firstLine;
                                    }
                                    var toRun = currentInput;
                                    currentInput = '';
                                    await executeCommand(toRun);
                                    shouldScrollToBottom = true;
                                    render();
                                    return;
                                }

                                if (loginMode && loginStep === 'password') {
                                    var newLen = domInput.length;
                                    if (newLen > currentInput.length) {
                                        currentInput += domInput.slice(currentInput.length);
                                    } else {
                                        currentInput = currentInput.slice(0, newLen);
                                    }
                                } else {
                                    currentInput = domInput;
                                }
                            }

                            terminalText.addEventListener('keydown', async function(e) {
                                if (e.key === 'Enter') {
                                    e.preventDefault();
                                    var toRun = currentInput;
                                    currentInput = '';
                                    await executeCommand(toRun);
                                    shouldScrollToBottom = true;
                                    render();
                                    return;
                                }

                                if (e.key === 'Backspace') {
                                    e.preventDefault();
                                    if (currentInput.length > 0) {
                                        currentInput = currentInput.slice(0, -1);
                                        render();
                                    }
                                    return;
                                }

                                if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {
                                    e.preventDefault();
                                    currentInput += e.key;
                                    render();
                                    return;
                                }
                            });

                            terminalText.addEventListener('input', function() {
                                if (rendering) return;
                                syncInputFromDom();
                            });

                            terminalText.addEventListener('pointerup', function() {
                                setTimeout(placeCaretAtEnd, 0);
                            });

                            document.getElementById('Login_Window_Close').addEventListener('click', function() {
                                clearTerminalData();
                                render();
                            });

                            window.registerTerminalCommand = function(name, handler, description) {
                                if (!name || typeof handler !== 'function') return;
                                customCommands[String(name).toLowerCase()] = {
                                    run: handler,
                                    desc: description || 'Custom command'
                                };
                            };

                            window.unregisterTerminalCommand = function(name) {
                                if (!name) return;
                                delete customCommands[String(name).toLowerCase()];
                            };

                            render();
                        })();
                    </script>
                </div>

                <style aria-label="Login_Window - Style">
                    #Login_Window {
                        width: 260px;
                        height: 280px;
                        
                    }
                </style>

                <script aria-label="Login_Window - Script">
                    document.getElementById('Login_Window_Close').addEventListener('click', function() {
                        document.getElementById('Login_Window').style.display = 'none';
                    });
                </script>
            </div>

            <!--Book_Mark: Login_Build - Clock-->

            <div class="Login_Build_Clock">
                <p id="Login_Build_Clock_Time">00:00:00:000</p>
                <p id="Login_Build_Clock_Date">00/00/0000</p>

                <style aria-label="Login_Build_Clock - Style">
                    .Login_Build_Clock {
                        position: absolute;
                        top: 10px;
                        right: 10px;

                    }

                    p {
                        font-size: var(--Main_Font_Size);
                        color: rgb(255, 255, 255);
                    }
                    
                    #Login_Build_Clock_Date {
                        position: absolute;
                        right: 0px;
                    }
                </style>

                <script aria-label="Login_Build_Clock - Script">
                    function updateClock() {
                        const now = new Date();
                        const hours = String(now.getHours()).padStart(2, '0');
                        const minutes = String(now.getMinutes()).padStart(2, '0');
                        const seconds = String(now.getSeconds()).padStart(2, '0');
                        const milliseconds = String(now.getMilliseconds()).padStart(3, '0');
                        document.getElementById('Login_Build_Clock_Time').textContent = `${hours}:${minutes}:${seconds}:${milliseconds}`;
                        
                        const day = String(now.getDate()).padStart(2, '0');
                        const month = String(now.getMonth() + 1).padStart(2, '0');
                        const year = now.getFullYear();
                        document.getElementById('Login_Build_Clock_Date').textContent = `${day}/${month}/${year}`;
                    }
                    updateClock();
                    setInterval(updateClock, 10);
                    
                </script>
            </div>

            <!--Book_Mark: Login_Build - Printable_Information-->

            <div class="Login_Build_Printable_Information">
                <p id="Login_Build_Printable_Information_Wifi_Conntected"></p>
                <p id="Login_Build_Printable_Information_Wifi_Name"></p>
                
                <style aria-label="Login_Build_Printable_Information - Style">
                    .Login_Build_Printable_Information {
                        position: absolute;
                        top: 60px;
                        right: 10px;
                        font-size: var(--Main_Font_Size);
                        color: var(--Main_Text_Color);
                    }
                </style>
                <script aria-label="Login_Build_Printable_Information - Script">

                    const Login_Build_Printable_Information_wifiElement = document.getElementById('Login_Build_Printable_Information_Wifi_Conntected');

                    function updateWifiStatus() {
                        if (navigator.onLine) {
                            Login_Build_Printable_Information_wifiElement.textContent = 'Wifi Connected';
                            Login_Build_Printable_Information_wifiElement.style.color = 'green';
                        } else {
                            Login_Build_Printable_Information_wifiElement.textContent = 'Wifi Disconnected';
                            Login_Build_Printable_Information_wifiElement.style.color = 'red';
                        }
                    }

                    updateWifiStatus();
                    window.addEventListener('online', updateWifiStatus);
                    window.addEventListener('offline', updateWifiStatus);
                    
                </script>
            </div>

            <style aria-label=".Login_Build - Style">
                .Login_Build {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    
                }
            </style>

            <script aria-label="Login_Build - Script">
                
            </script>

            
        </div>
        <!--Book_Mark: Login_Style-->
        <style aria-label="Login_Style">

            .Login {
                width: 100dvw;
                height: 100dvh;
                overflow: hidden;
            }



        </style>


    </div>
</body>
</html>