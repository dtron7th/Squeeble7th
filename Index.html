<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eden Economy</title>

    <link rel="stylesheet" href="CSS/UI.css">

</head>
<body>
    <style>
        body {
            background-color: rgb(0, 0, 0);
        }
    </style>
    <div class="Login">
        <div class="Menu">
            <div class="Window Menu_Window" style="width:160px; height:270px;">
                <div class="Window_Header">
                    <p class="Title">Menu </p>
                </div>
                <div class="Content">
                    <div class="Menu_List">
                        <button class="Menu_Item">[Login]</button>
                        <button class="Menu_Item">[Sign Up]</button>
                        <button class="Menu_Item">[Character Sheet]</button>
                        <button class="Menu_Item">[Theme]</button>
                    </div>
                    <style aria-label="Menu_List_Style">
                        .Menu_List {
                            position: absolute;
                            top: 10px;
                            left: 0px;
                            display: flex;
                            flex-direction: column;
                            gap: 10px;
                        }

                        .Menu_List > .Menu_Item {
                            text-align: left;
                        }

                        .Menu_List > .Menu_Item > .Menu_Item:hover {
                            background-color: var(--UI-Buttons-Fields-Color-2);
                        }
                    </Style>
                    <hr class="Menu_Divider"/>

                    <style aria-label="Menu_Divider_Style">
                        .Menu_Divider {
                            position: absolute;
                            top: 110px;
                            left: 0px;
                            width: 80%;
                            height: 10px;
                            border: 1px solid var(--Main_Border);
                        }
                    </Style>
                    
                    <div class="Font_List">
                        <button class="Font_Setting">[Font 10]</button>
                        <button class="Font_Setting">[Font 12]</button>
                        <button class="Font_Setting">[Font 14]</button>
                        <button class="Font_Setting">[Font 16]</button>
                    </div>
                    <style aria-label="Font_List_Style">
                        .Font_List {
                            position: absolute;
                            top: 140px;
                            left: 0px;
                            display: flex;
                            flex-direction: column;
                            gap: 10px;
                        }

                        .Font_List > .Font_Setting {
                            text-align: left;
                        }

                        .Font_List > .Font_Setting >.Font_Setting:hover {
                            background-color: var(--UI-Buttons-Fields-Color-2);
                        }
                    </Style>
                </div>
            </div>
        </div>
    </div>
        </div>
    </div>
    <div class="Home_Main_1">

    </div>
    <div class="Home_Main_2">

    </div>
    <div class="Home_Main_3">

    </div>
    
    <script aria-label="Essentials_Script">

        /* ============================================================================ */
        /* DRAGGING ALL WINDOWS AND PANELS */
        /* ============================================================================ */

        // Enable dragging of any element with class "Window" by its child ".Window_Header"

        (() => {
            const headers = document.querySelectorAll('.Window_Header');
            headers.forEach(header => {
                // visual affordance
                header.style.cursor = 'grab';
                header.style.touchAction = 'none'; // allow pointer events without scrolling

                header.addEventListener('pointerdown', (ev) => {
                    const win = header.closest('.Window');
                    if (!win) return;

                    // ensure the window can be moved by absolute positioning
                    const rect = win.getBoundingClientRect();
                    const docLeft = rect.left + window.scrollX;
                    const docTop = rect.top + window.scrollY;
                    const computed = getComputedStyle(win);
                    if (computed.position === 'static') {
                        win.style.position = 'absolute';
                        win.style.left = `${docLeft}px`;
                        win.style.top = `${docTop}px`;
                    } else {
                        // make sure left/top are numbers we can use
                        if (!win.style.left) win.style.left = `${docLeft}px`;
                        if (!win.style.top) win.style.top = `${docTop}px`;
                    }

                    header.setPointerCapture(ev.pointerId);
                    header.style.cursor = 'grabbing';

                    const startX = ev.clientX;
                    const startY = ev.clientY;
                    const startLeft = parseFloat(win.style.left || docLeft);
                    const startTop = parseFloat(win.style.top || docTop);

                    function onPointerMove(e) {
                        const dx = e.clientX - startX;
                        const dy = e.clientY - startY;
                        win.style.left = `${Math.round(startLeft + dx)}px`;
                        win.style.top = `${Math.round(startTop + dy)}px`;
                    }

                    function onPointerUp(e) {
                        header.releasePointerCapture(e.pointerId);
                        header.style.cursor = 'grab';
                        document.removeEventListener('pointermove', onPointerMove);
                        document.removeEventListener('pointerup', onPointerUp);
                    }

                    document.addEventListener('pointermove', onPointerMove);
                    document.addEventListener('pointerup', onPointerUp);
                });
            });
        })();

        (() => {
            const GRID_X = 10;
            const GRID_Y = 10;

            function snapElementToGrid(el, gx = GRID_X, gy = GRID_Y) {
                if (!el) return;
                const rect = el.getBoundingClientRect();
                const docLeft = rect.left + window.scrollX;
                const docTop = rect.top + window.scrollY;

                let left = parseFloat(el.style.left);
                let top = parseFloat(el.style.top);
                if (!Number.isFinite(left)) left = docLeft;
                if (!Number.isFinite(top)) top = docTop;

                const snappedLeft = Math.round(left / gx) * gx;
                const snappedTop = Math.round(top / gy) * gy;

                el.style.left = snappedLeft + 'px';
                el.style.top = snappedTop + 'px';
            }

            // Track which window is being dragged
            let draggingWindow = null;
            document.querySelectorAll('.Window_Header').forEach(header => {
                header.addEventListener('pointerdown', () => {
                    draggingWindow = header.closest('.Window');
                });
            });

            // Snap when pointer is released â€” snap the dragged window and ensure all windows align
            document.addEventListener('pointerup', () => {
                if (draggingWindow) {
                    snapElementToGrid(draggingWindow);
                    draggingWindow = null;
                }
                document.querySelectorAll('.Window').forEach(w => snapElementToGrid(w));
            });

            // Optional: live snapping while dragging (throttled with requestAnimationFrame)
            let rafId = null;
            document.addEventListener('pointermove', () => {
                if (!draggingWindow) return;
                if (rafId) return;
                rafId = requestAnimationFrame(() => {
                    snapElementToGrid(draggingWindow);
                    rafId = null;
                });
            });
        })();

    </script>

</body>
</html>


